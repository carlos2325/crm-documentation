<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📋 CRM - Sistema de Gestión de Relaciones con Clientes</title>
    <link rel="stylesheet" href="assets/css/github-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- HEADER SIMPLE -->
    <header class="header">
        <div class="header-container">
            <div class="header-brand">
                <i class="fas fa-code"></i>
                <span>CRM API Documentation</span>
            </div>
            <div class="header-search">
                <input type="text" placeholder="Buscar..." id="search-input">
                <i class="fas fa-search"></i>
            </div>
            <div class="header-links">
                <a href="examples.html">Ejemplos</a>
                <a href="https://testapi2.eventosorganizador.com/graphql" target="_blank">GraphQL Test</a>
            </div>
        </div>
    </header>

    <!-- BREADCRUMBS -->
    <nav class="breadcrumbs">
        <div class="container">
            <a href="index.html">Home</a>
            <span class="separator">></span>
            <span class="current">CRM API Documentation</span>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <!-- Home Section -->
        <section id="home" class="section">
            <div class="container">
                
                <!-- HERO SECTION -->
                <section class="hero">
                    <h1>CRM API Documentation</h1>
                    <p class="hero-description">
                        Sistema completo de gestión de relaciones comerciales con API GraphQL. 
                        116+ queries, 150+ mutations y documentación completa para CRM, eventos, 
                        campañas, sistema de chat en tiempo real, tracking de tokens de IA y configuración multi-tenant.
                    </p>
                    
                    <div class="hero-cta-group">
                        <a href="queries.html" class="cta-primary">
                            <span class="cta-text">Explorar API</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        <a href="https://testapi2.eventosorganizador.com/graphql" target="_blank" class="cta-secondary">
                            <i class="fas fa-flask"></i>
                            <span>GraphQL Visual Test</span>
                        </a>
                        <a href="examples.html" class="cta-tertiary">
                            <i class="fas fa-code"></i>
                            <span>Ver Ejemplos</span>
                        </a>
                    </div>
                    
                    <!-- QUICK TEST HIGHLIGHT -->
                    <div class="test-environment-highlight">
                        <div class="test-banner">
                            <i class="fas fa-flask"></i>
                            <div class="test-content">
                                <strong>🎯 Entorno Visual de Test Disponible</strong>
                                <p>Prueba la API GraphQL directamente con interfaz visual en 
                                <a href="https://testapi2.eventosorganizador.com/graphql" target="_blank">testapi2.eventosorganizador.com/graphql</a></p>
                            </div>
                            <a href="https://testapi2.eventosorganizador.com/graphql" target="_blank" class="test-btn">
                                <i class="fas fa-external-link-alt"></i>
                                Probar Ahora
                            </a>
                        </div>
                    </div>
                </section>
                
                <!-- INFORMACIÓN GENERAL -->
                <section class="content-section">
                    <h2>Información general</h2>
                    <div class="cards-grid">
                        <div class="card">
                            <h3><a href="queries.html">Comience aquí</a></h3>
                            <div class="card-links">
                                <div class="card-link">
                                    <a href="examples.html#authentication">Autenticación con GraphQL</a>
                                    <p>Aprende cómo autenticarte en la API GraphQL, y luego cómo crear y ejecutar consultas y mutaciones.</p>
                                </div>
                                <div class="card-link">
                                    <a href="examples.html#intro">Introducción a GraphQL</a>
                                    <p>Aprende terminología y conceptos útiles para utilizar la API GraphQL del CRM.</p>
                                </div>
                                <div class="card-link">
                                    <a href="examples.html#clients">Usando clientes GraphQL</a>
                                    <p>Puedes ejecutar consultas con datos reales usando varios clientes y librerías GraphQL.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                                                <div class="bar" style="height: 90%"></div>
                                                <div class="bar" style="height: 70%"></div>
                                                <div class="bar" style="height: 85%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- CARACTERÍSTICAS PRINCIPALES EN MEGA COLUMNAS -->
                <div class="features-mega-section">
                    <div class="features-mega-grid">
                        <!-- CRM Core Features -->
                        <div class="mega-card crm-mega">
                            <div class="mega-header">
                                <div class="mega-icon"><i class="fas fa-users"></i></div>
                                <div class="mega-title">
                                    <h3>CRM Core</h3>
                                    <span class="mega-subtitle">Gestión de Relaciones</span>
                                </div>
                            </div>
                            <div class="mega-features">
                                <div class="sub-feature">
                                    <i class="fas fa-user-plus"></i>
                                    <div class="sub-content">
                                        <h4>Gestión de Leads</h4>
                                        <p>Pipeline, conversiones, métricas</p>
                                        <span class="sub-badge">26 campos</span>
                                    </div>
                                </div>
                                <div class="sub-feature">
                                    <i class="fas fa-building"></i>
                                    <div class="sub-content">
                                        <h4>Entidades y Contactos</h4>
                                        <p>Organizaciones y relaciones</p>
                                        <span class="sub-badge">32 campos</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Marketing Features -->
                        <div class="mega-card marketing-mega">
                            <div class="mega-header">
                                <div class="mega-icon"><i class="fas fa-bullhorn"></i></div>
                                <div class="mega-title">
                                    <h3>Marketing</h3>
                                    <span class="mega-subtitle">Campañas Multi-Canal</span>
                                </div>
                            </div>
                            <div class="mega-features">
                                <div class="sub-feature">
                                    <i class="fas fa-envelope"></i>
                                    <div class="sub-content">
                                        <h4>Email Marketing</h4>
                                        <p>Plantillas y automatización</p>
                                        <span class="sub-badge">Email</span>
                                    </div>
                                </div>
                                <div class="sub-feature">
                                    <i class="fab fa-whatsapp"></i>
                                    <div class="sub-content">
                                        <h4>WhatsApp Business</h4>
                                        <p>Mensajes masivos</p>
                                        <span class="sub-badge">WhatsApp</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Events Features -->
                        <div class="mega-card events-mega">
                            <div class="mega-header">
                                <div class="mega-icon"><i class="fas fa-calendar-alt"></i></div>
                                <div class="mega-title">
                                    <h3>Eventos</h3>
                                    <span class="mega-subtitle">Gestión Completa</span>
                                </div>
                            </div>
                            <div class="mega-features">
                                <div class="sub-feature">
                                    <i class="fas fa-calendar-plus"></i>
                                    <div class="sub-content">
                                        <h4>Gestión de Eventos</h4>
                                        <p>Configuración completa</p>
                                        <span class="sub-badge">27 campos</span>
                                    </div>
                                </div>
                                <div class="sub-feature">
                                    <i class="fas fa-users"></i>
                                    <div class="sub-content">
                                        <h4>Invitados y Presupuesto</h4>
                                        <p>Control financiero</p>
                                        <span class="sub-badge">17 campos</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Systems -->
                        <div class="mega-card systems-mega">
                            <div class="mega-header">
                                <div class="mega-icon"><i class="fas fa-cogs"></i></div>
                                <div class="mega-title">
                                    <h3>Sistemas</h3>
                                    <span class="mega-subtitle">Avanzados</span>
                                </div>
                            </div>
                            <div class="mega-features">
                                <div class="sub-feature">
                                    <i class="fas fa-shield-alt"></i>
                                    <div class="sub-content">
                                        <h4>Sistema de Permisos</h4>
                                        <p>Control granular</p>
                                        <span class="sub-badge">Seguridad</span>
                                    </div>
                                </div>
                                <div class="sub-feature">
                                    <i class="fas fa-chart-line"></i>
                                    <div class="sub-content">
                                        <h4>Analytics y Reportes</h4>
                                        <p>Dashboards avanzados</p>
                                        <span class="sub-badge">Sistema</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- STACK TECNOLÓGICO COMPLETO -->
                <div class="tech-stack-full-section">
                    <div class="tech-header">
                        <h2>🛠️ Stack Tecnológico Completo</h2>
                        <p class="tech-description">Tecnologías modernas para máximo rendimiento y escalabilidad</p>
                    </div>
                    
                    <div class="tech-categories">
                        <div class="tech-category backend-tech">
                            <div class="category-icon">
                                <i class="fas fa-server"></i>
                            </div>
                            <h3>Backend & API</h3>
                            <div class="tech-items">
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fab fa-node-js"></i></div>
                                    <div class="tech-details">
                                        <h4>Node.js</h4>
                                        <p>Runtime JavaScript del lado servidor</p>
                                        <span class="tech-version">v18.x</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-project-diagram"></i></div>
                                    <div class="tech-details">
                                        <h4>GraphQL</h4>
                                        <p>API query language moderna</p>
                                        <span class="tech-version">Apollo Server</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-bolt"></i></div>
                                    <div class="tech-details">
                                        <h4>Express.js</h4>
                                        <p>Framework web minimalista</p>
                                        <span class="tech-version">v4.x</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tech-category database-tech">
                            <div class="category-icon">
                                <i class="fas fa-database"></i>
                            </div>
                            <h3>Base de Datos</h3>
                            <div class="tech-items">
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-leaf"></i></div>
                                    <div class="tech-details">
                                        <h4>MongoDB Atlas</h4>
                                        <p>Base de datos NoSQL en la nube</p>
                                        <span class="tech-version">Cloud</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-layer-group"></i></div>
                                    <div class="tech-details">
                                        <h4>Mongoose</h4>
                                        <p>ODM para MongoDB</p>
                                        <span class="tech-version">v7.x</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-search"></i></div>
                                    <div class="tech-details">
                                        <h4>MongoDB Search</h4>
                                        <p>Búsqueda avanzada</p>
                                        <span class="tech-version">Atlas Search</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tech-category frontend-tech">
                            <div class="category-icon">
                                <i class="fas fa-laptop-code"></i>
                            </div>
                            <h3>Frontend</h3>
                            <div class="tech-items">
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fab fa-react"></i></div>
                                    <div class="tech-details">
                                        <h4>React</h4>
                                        <p>Biblioteca de UI components</p>
                                        <span class="tech-version">v18.x</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fab fa-js-square"></i></div>
                                    <div class="tech-details">
                                        <h4>TypeScript</h4>
                                        <p>JavaScript con tipos estáticos</p>
                                        <span class="tech-version">v5.x</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-rocket"></i></div>
                                    <div class="tech-details">
                                        <h4>Apollo Client</h4>
                                        <p>Cliente GraphQL completo</p>
                                        <span class="tech-version">v3.x</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tech-category devops-tech">
                            <div class="category-icon">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <h3>DevOps & Cloud</h3>
                            <div class="tech-items">
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fab fa-docker"></i></div>
                                    <div class="tech-details">
                                        <h4>Docker</h4>
                                        <p>Containerización de aplicaciones</p>
                                        <span class="tech-version">Containers</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-fire"></i></div>
                                    <div class="tech-details">
                                        <h4>Firebase</h4>
                                        <p>Autenticación y storage</p>
                                        <span class="tech-version">v9.x</span>
                                    </div>
                                </div>
                                <div class="tech-item">
                                    <div class="tech-logo"><i class="fas fa-globe"></i></div>
                                    <div class="tech-details">
                                        <h4>Nginx</h4>
                                        <p>Proxy reverso y load balancer</p>
                                        <span class="tech-version">Production</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tech-summary">
                        <div class="summary-stats">
                            <div class="stat-item">
                                <span class="stat-number">12+</span>
                                <span class="stat-label">Tecnologías</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">99.9%</span>
                                <span class="stat-label">Uptime</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">50ms</span>
                                <span class="stat-label">Latencia</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">Multi-tenant</span>
                                <span class="stat-label">Escalable</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quick-start">
                    <h2>🚀 Inicio Rápido</h2>
                    <div class="quick-start-grid">
                        <div class="quick-item">
                            <h4>1. Configuración</h4>
                            <p>GraphQL API en puertos 3000 (test) y 4000 (producción)</p>
                        </div>
                        <div class="quick-item">
                            <h4>2. Autenticación</h4>
                            <p>JWT + Firebase para gestión de usuarios y permisos</p>
                        </div>
                        <div class="quick-item">
                            <h4>3. Base de Datos</h4>
                            <p>MongoDB Atlas con modelos optimizados para CRM</p>
                        </div>
                        <div class="quick-item">
                            <h4>4. Frontend</h4>
                            <p>React + TypeScript + Apollo Client</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- API GraphQL Section -->
        <section id="api" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-code"></i>
                    API GraphQL Completa
                </h2>

                <!-- API GRAPHQL COMPLETA EN COLUMNAS MEGA -->
                <div class="api-graphql-mega">
                    <div class="api-hero">
                        <div class="api-hero-content">
                            <h3>📊 API GraphQL Completa</h3>
                            <p class="api-description">Interfaz de programación moderna con 246+ operaciones, tipos avanzados y sistema en tiempo real</p>
                        </div>
                        <div class="api-stats-highlight">
                            <div class="highlight-stat">
                                <span class="highlight-number">246</span>
                                <span class="highlight-label">Operaciones</span>
                            </div>
                            <div class="highlight-stat">
                                <span class="highlight-number">100+</span>
                                <span class="highlight-label">Tipos</span>
                            </div>
                            <div class="highlight-stat">
                                <span class="highlight-number">7</span>
                                <span class="highlight-label">Módulos</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="api-columns-grid">
                        <!-- Queries Column -->
                        <div class="api-column queries-column">
                            <div class="column-header">
                                <div class="column-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div class="column-title">
                                    <h4>Queries</h4>
                                    <span class="column-count">91 operaciones</span>
                                </div>
                            </div>
                            <div class="column-content">
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-users"></i></div>
                                    <div class="feature-content">
                                        <h5>CRM Queries</h5>
                                        <p>Leads, contactos, entidades</p>
                                        <span class="feature-count">25+ queries</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-calendar"></i></div>
                                    <div class="feature-content">
                                        <h5>Event Queries</h5>
                                        <p>Eventos, invitados, tareas</p>
                                        <span class="feature-count">18+ queries</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-envelope"></i></div>
                                    <div class="feature-content">
                                        <h5>Campaign Queries</h5>
                                        <p>Campañas, métricas</p>
                                        <span class="feature-count">12+ queries</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-building"></i></div>
                                    <div class="feature-content">
                                        <h5>Whitelabel Queries</h5>
                                        <p>Multi-tenant, developers</p>
                                        <span class="feature-count">15+ queries</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Mutations Column -->
                        <div class="api-column mutations-column">
                            <div class="column-header">
                                <div class="column-icon">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="column-title">
                                    <h4>Mutations</h4>
                                    <span class="column-count">155 operaciones</span>
                                </div>
                            </div>
                            <div class="column-content">
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-plus-circle"></i></div>
                                    <div class="feature-content">
                                        <h5>Create Operations</h5>
                                        <p>Crear leads, eventos, campañas</p>
                                        <span class="feature-count">45+ mutations</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-sync"></i></div>
                                    <div class="feature-content">
                                        <h5>Update Operations</h5>
                                        <p>Actualizar datos existentes</p>
                                        <span class="feature-count">55+ mutations</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-trash"></i></div>
                                    <div class="feature-content">
                                        <h5>Delete Operations</h5>
                                        <p>Eliminar registros</p>
                                        <span class="feature-count">25+ mutations</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-share"></i></div>
                                    <div class="feature-content">
                                        <h5>Share Operations</h5>
                                        <p>Compartir recursos</p>
                                        <span class="feature-count">30+ mutations</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Types Column -->
                        <div class="api-column types-column">
                            <div class="column-header">
                                <div class="column-icon">
                                    <i class="fas fa-database"></i>
                                </div>
                                <div class="column-title">
                                    <h4>Tipos</h4>
                                    <span class="column-count">100+ tipos</span>
                                </div>
                            </div>
                            <div class="column-content">
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-cube"></i></div>
                                    <div class="feature-content">
                                        <h5>Core Types</h5>
                                        <p>CRM_Lead, CRM_Contact, EVT_Event</p>
                                        <span class="feature-count">25+ tipos</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-cubes"></i></div>
                                    <div class="feature-content">
                                        <h5>Input Types</h5>
                                        <p>Tipos para mutations</p>
                                        <span class="feature-count">35+ tipos</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-list"></i></div>
                                    <div class="feature-content">
                                        <h5>Enums</h5>
                                        <p>Estados, roles, tipos</p>
                                        <span class="feature-count">20+ enums</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-cog"></i></div>
                                    <div class="feature-content">
                                        <h5>Custom Scalars</h5>
                                        <p>DateTime, JSON, Upload</p>
                                        <span class="feature-count">8+ scalars</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Features Column -->
                        <div class="api-column advanced-column">
                            <div class="column-header">
                                <div class="column-icon">
                                    <i class="fas fa-rocket"></i>
                                </div>
                                <div class="column-title">
                                    <h4>Avanzado</h4>
                                    <span class="column-count">Funciones especiales</span>
                                </div>
                            </div>
                            <div class="column-content">
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-bolt"></i></div>
                                    <div class="feature-content">
                                        <h5>Subscriptions</h5>
                                        <p>Actualizaciones en tiempo real</p>
                                        <span class="feature-count">WebSocket</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                                    <div class="feature-content">
                                        <h5>Autenticación</h5>
                                        <p>JWT + Firebase Auth</p>
                                        <span class="feature-count">Seguro</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-layer-group"></i></div>
                                    <div class="feature-content">
                                        <h5>Multi-tenant</h5>
                                        <p>Aislamiento por cliente</p>
                                        <span class="feature-count">Whitelabel</span>
                                    </div>
                                </div>
                                <div class="api-feature">
                                    <div class="feature-icon"><i class="fas fa-tachometer-alt"></i></div>
                                    <div class="feature-content">
                                        <h5>Performance</h5>
                                        <p>Cache, optimización</p>
                                        <span class="feature-count">50ms avg</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="api-footer">
                        <div class="api-endpoints">
                            <div class="endpoint-item">
                                <i class="fas fa-rocket"></i>
                                <div class="endpoint-details">
                                    <strong>Production GraphQL</strong>
                                    <span><a href="https://api2.eventosorganizador.com/graphql" target="_blank">https://api2.eventosorganizador.com/graphql</a></span>
                                    <small>Puerto 4000 - Endpoint principal</small>
                                </div>
                            </div>
                            <div class="endpoint-item">
                                <i class="fas fa-flask"></i>
                                <div class="endpoint-details">
                                    <strong>Test GraphQL</strong>
                                    <span><a href="https://testapi2.eventosorganizador.com/graphql" target="_blank">https://testapi2.eventosorganizador.com/graphql</a></span>
                                    <small>Puerto 3000 - GraphQL Playground visual 🎯</small>
                                </div>
                            </div>
                            <div class="endpoint-item">
                                <i class="fas fa-tools"></i>
                                <div class="endpoint-details">
                                    <strong>Production MCP</strong>
                                    <span><a href="https://api2.eventosorganizador.com/tools" target="_blank">https://api2.eventosorganizador.com/tools</a></span>
                                    <small>Puerto 4001 - MCP Server herramientas</small>
                                </div>
                            </div>
                            <div class="endpoint-item">
                                <i class="fas fa-wrench"></i>
                                <div class="endpoint-details">
                                    <strong>Test MCP</strong>
                                    <span><a href="https://testapi2.eventosorganizador.com/tools" target="_blank">https://testapi2.eventosorganizador.com/tools</a></span>
                                    <small>Puerto 3001 - MCP Test herramientas</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enlaces Directos Organizados -->
                <div class="direct-links-section">
                    <h3>🔗 Enlaces Directos a Secciones</h3>
                    
                    <div class="links-categories">
                        <div class="link-category">
                            <div class="category-header">
                                <i class="fas fa-code"></i>
                                <h4>API Core</h4>
                            </div>
                            <div class="category-links">
                                <a href="types.html" class="link-item">
                                    <i class="fas fa-database"></i>
                                    <span>Tipos Principales del CRM</span>
                                </a>
                                <a href="types.html#CRM_Lead" class="link-item">
                                    <i class="fas fa-cogs"></i>
                                    <span>Enums y Tipos Especializados</span>
                                </a>
                                <a href="queries.html" class="link-item">
                                    <i class="fas fa-search"></i>
                                    <span>Queries Principales</span>
                                </a>
                                <a href="mutations.html" class="link-item">
                                    <i class="fas fa-edit"></i>
                                    <span>Mutations Principales</span>
                                </a>
                                <a href="#api" class="link-item">
                                    <i class="fas fa-bolt"></i>
                                    <span>Subscriptions en Tiempo Real</span>
                                </a>
                            </div>
                        </div>
                        
                        <div class="link-category">
                            <div class="category-header">
                                <i class="fas fa-calendar"></i>
                                <h4>Eventos</h4>
                            </div>
                            <div class="category-links">
                                <a href="#events" class="link-item">
                                    <i class="fas fa-calendar-alt"></i>
                                    <span>Gestión de Eventos</span>
                                </a>
                                <a href="queries.html#getEvent" class="link-item">
                                    <i class="fas fa-search"></i>
                                    <span>Queries de Eventos</span>
                                </a>
                                <a href="mutations.html#createEvent" class="link-item">
                                    <i class="fas fa-edit"></i>
                                    <span>Mutations de Eventos</span>
                                </a>
                                <a href="#events" class="link-item">
                                    <i class="fas fa-shield-alt"></i>
                                    <span>Permisos de Eventos</span>
                                </a>
                            </div>
                        </div>
                        
                        <div class="link-category">
                            <div class="category-header">
                                <i class="fas fa-envelope"></i>
                                <h4>Campañas</h4>
                            </div>
                            <div class="category-links">
                                <a href="#campaigns" class="link-item">
                                    <i class="fas fa-bullhorn"></i>
                                    <span>Gestión de Campañas</span>
                                </a>
                                <a href="queries.html#getCRMLeads" class="link-item">
                                    <i class="fas fa-search"></i>
                                    <span>Queries de Campañas</span>
                                </a>
                                <a href="#campaigns" class="link-item">
                                    <i class="fas fa-chart-line"></i>
                                    <span>Métricas y Analytics</span>
                                </a>
                            </div>
                        </div>
                        
                        <div class="link-category">
                            <div class="category-header">
                                <i class="fas fa-cog"></i>
                                <h4>Sistemas Avanzados</h4>
                            </div>
                            <div class="category-links">
                                <a href="queries.html#getWhitelabels" class="link-item">
                                    <i class="fas fa-building"></i>
                                    <span>Sistema Whitelabel</span>
                                </a>
                                <a href="#permissions" class="link-item">
                                    <i class="fas fa-lock"></i>
                                    <span>Sistema de Permisos</span>
                                </a>
                                <a href="#complete-systems" class="link-item">
                                    <i class="fas fa-share-alt"></i>
                                    <span>Sistemas de Compartición</span>
                                </a>
                            </div>
                        </div>
                        
                        <div class="api-category">
                            <div class="category-header">
                                <div class="category-icon">
                                    <i class="fas fa-comments"></i>
                                </div>
                                <div class="category-title">
                                    <h4>Sistema de Chat</h4>
                                    <p>Comunicación en tiempo real y tracking de tokens</p>
                                </div>
                            </div>
                            <div class="category-links">
                                <a href="#chat-system" class="link-item">
                                    <i class="fas fa-comment-dots"></i>
                                    <span>Chat en Tiempo Real</span>
                                </a>
                                <a href="#whatsapp-business" class="link-item">
                                    <i class="fas fa-whatsapp"></i>
                                    <span>WhatsApp Business API</span>
                                </a>
                                <a href="#token-tracking" class="link-item">
                                    <i class="fas fa-coins"></i>
                                    <span>Tracking de Tokens</span>
                                </a>
                                <a href="#chat-system" class="link-item">
                                    <i class="fas fa-database"></i>
                                    <span>Almacenamiento</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-navigation">
                        <h4>Navegación Rápida</h4>
                        <div class="nav-buttons">
                            <a href="queries.html" class="nav-btn">
                                <i class="fas fa-code"></i>
                                <span>API</span>
                            </a>
                            <a href="#events" class="nav-btn">
                                <i class="fas fa-calendar"></i>
                                <span>Eventos</span>
                            </a>
                            <a href="#campaigns" class="nav-btn">
                                <i class="fas fa-envelope"></i>
                                <span>Campañas</span>
                            </a>
                            <a href="#permissions" class="nav-btn">
                                <i class="fas fa-shield-alt"></i>
                                <span>Permisos</span>
                            </a>
                            <a href="#chat-system" class="nav-btn">
                                <i class="fas fa-comments"></i>
                                <span>Chat</span>
                            </a>
                            <a href="#whatsapp-business" class="nav-btn">
                                <i class="fas fa-whatsapp"></i>
                                <span>WhatsApp</span>
                            </a>
                            <a href="#token-tracking" class="nav-btn">
                                <i class="fas fa-coins"></i>
                                <span>Tokens</span>
                            </a>
                            <a href="queries.html#getWhitelabels" class="nav-btn">
                                <i class="fas fa-building"></i>
                                <span>Whitelabel</span>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="api-modules">
                    <h3>🏗️ Módulos Principales</h3>
                    
                    <div class="module-card">
                        <h4><i class="fas fa-user-plus"></i> CRM - Gestión de Relaciones</h4>
                        <div class="module-content">
                            <h5>Tipos Principales:</h5>
                            <ul>
                                <li><strong>CRM_Lead</strong> - 26 campos (pipeline, conversiones, métricas)</li>
                                <li><strong>CRM_Contact</strong> - 32 campos (contactos individuales)</li>
                                <li><strong>CRM_Entity</strong> - 26 campos (organizaciones/empresas)</li>
                                <li><strong>CRM_Campaign</strong> - 18 campos (campañas multi-canal)</li>
                                <li><strong>CRM_Note</strong> - 8 campos (notas y seguimiento)</li>
                                <li><strong>CRM_Reminder</strong> - 6 campos (recordatorios)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="module-card">
                        <h4><i class="fas fa-calendar-alt"></i> EVT - Gestión de Eventos</h4>
                        <div class="module-content">
                            <h5>Tipos Principales:</h5>
                            <ul>
                                <li><strong>EVT_Event</strong> - 27 campos (eventos principales)</li>
                                <li><strong>EVT_Invitado</strong> - 10 campos (gestión de invitados)</li>
                                <li><strong>EVT_Presupuesto</strong> - 7 campos (control financiero)</li>
                                <li><strong>EVT_Task</strong> - 7 campos (tareas del evento)</li>
                                <li><strong>EVT_Itinerario</strong> - 5 campos (agenda)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="module-card">
                        <h4><i class="fas fa-building"></i> 🏢 Whitelabel/Developer - Sistema Multi-Tenant</h4>
                        <div class="module-content">
                            <h5>Tipos Principales:</h5>
                            <ul>
                                <li><strong>WhitelabelDeveloper</strong> - Gestión de desarrolladores</li>
                                <li><strong>WhitelabelInfo</strong> - Información de marca blanca</li>
                                <li><strong>Development</strong> - Entornos de desarrollo</li>
                                <li><strong>User</strong> - Usuarios con permisos multi-tenant</li>
                            </ul>
                            
                            <h5>🔑 Queries Principales:</h5>
                            <ul>
                                <li><strong>getWhitelabelDeveloper</strong> - Obtener desarrollador</li>
                                <li><strong>getWhitelabelInfo</strong> - Obtener info de marca blanca</li>
                                <li><strong>getDevelopment</strong> - Obtener entorno de desarrollo</li>
                                <li><strong>getUserByDevelopment</strong> - Usuarios por development</li>
                            </ul>
                            
                            <h5>⚙️ Mutations Principales:</h5>
                            <ul>
                                <li><strong>createWhitelabelDeveloper</strong> - Crear desarrollador</li>
                                <li><strong>updateWhitelabelInfo</strong> - Actualizar marca blanca</li>
                                <li><strong>assignUserToDevelopment</strong> - Asignar usuario</li>
                                <li><strong>updateDevelopmentPermissions</strong> - Actualizar permisos</li>
                            </ul>
                        </div>
                    </div>

                    <div class="module-card">
                        <h4><i class="fas fa-store"></i> BUSN - Gestión de Negocios</h4>
                        <div class="module-content">
                            <h5>Tipos Principales:</h5>
                            <ul>
                                <li><strong>BUSN_Business</strong> - 21 campos (negocios/empresas)</li>
                                <li><strong>BUSN_reviewsT</strong> - 6 campos (reseñas)</li>
                                <li><strong>BUSN_questionsAndAnswers</strong> - 2 campos (FAQ)</li>
                                <li><strong>BUSN_horario</strong> - 2 campos (horarios)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="module-card">
                        <h4><i class="fas fa-chart-line"></i> USAGE - Analytics y Métricas</h4>
                        <div class="module-content">
                            <h5>Tipos Principales:</h5>
                            <ul>
                                <li><strong>USAGE_UsageTracking</strong> - 20 campos (seguimiento)</li>
                                <li><strong>USAGE_CampaignBilling</strong> - 11 campos (facturación)</li>
                                <li><strong>USAGE_DeliveryMetrics</strong> - 6 campos (métricas)</li>
                                <li><strong>USAGE_DashboardStats</strong> - 5 campos (dashboard)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Autenticación y Seguridad Mejorada -->
                <div class="authentication-section">
                    <div class="auth-header">
                        <div class="auth-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="auth-title">
                            <h3>🔐 Autenticación y Seguridad</h3>
                            <p>Sistema de autenticación robusto con JWT + Firebase</p>
                        </div>
                    </div>
                    
                    <div class="auth-grid">
                        <div class="auth-card">
                            <div class="auth-card-header">
                                <i class="fas fa-key"></i>
                                <h4>JWT + Firebase</h4>
                            </div>
                            <div class="auth-card-content">
                                <p>Autenticación segura con tokens JWT y gestión de usuarios con Firebase.</p>
                                <div class="auth-features">
                                    <div class="auth-feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Tokens seguros</span>
                                    </div>
                                    <div class="auth-feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Renovación automática</span>
                                    </div>
                                    <div class="auth-feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Multi-tenant</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="auth-card">
                            <div class="auth-card-header">
                                <i class="fas fa-code"></i>
                                <h4>Headers Requeridos</h4>
                            </div>
                            <div class="auth-card-content">
                                <div class="code-block">
                                    <pre><code class="language-http">Authorization: Bearer &lt;JWT_TOKEN&gt;
Content-Type: application/json
X-Development: &lt;DEVELOPMENT_ID&gt;</code></pre>
                                </div>
                            </div>
                        </div>
                        
                        <div class="auth-card">
                            <div class="auth-card-header">
                                <i class="fas fa-users"></i>
                                <h4>Roles de Usuario</h4>
                            </div>
                            <div class="auth-card-content">
                                <div class="roles-grid">
                                    <div class="role-item admin-role">
                                        <div class="role-icon">
                                            <i class="fas fa-crown"></i>
                                        </div>
                                        <div class="role-info">
                                            <strong>Admin</strong>
                                            <span>Acceso completo</span>
                                        </div>
                                    </div>
                                    <div class="role-item manager-role">
                                        <div class="role-icon">
                                            <i class="fas fa-user-tie"></i>
                                        </div>
                                        <div class="role-info">
                                            <strong>Manager</strong>
                                            <span>Gestión de equipos</span>
                                        </div>
                                    </div>
                                    <div class="role-item user-role">
                                        <div class="role-icon">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <div class="role-info">
                                            <strong>User</strong>
                                            <span>Acceso limitado</span>
                                        </div>
                                    </div>
                                    <div class="role-item guest-role">
                                        <div class="role-icon">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="role-info">
                                            <strong>Guest</strong>
                                            <span>Solo lectura</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Campaigns Section -->
        <section id="campaigns" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-envelope"></i>
                    Sistema de Campañas Multi-Canal
                </h2>

                <!-- SISTEMA DE CAMPAÑAS MULTI-CANAL MEJORADO -->
                <div class="campaigns-mega-section">
                    <div class="campaigns-hero">
                        <div class="campaigns-hero-content">
                            <h3>📧 Sistema de Campañas Multi-Canal</h3>
                            <p class="campaigns-description">Motor completo de marketing automation con integración directa al CRM y métricas avanzadas en tiempo real</p>
                        </div>
                        <div class="campaigns-stats">
                            <div class="campaign-stat">
                                <span class="stat-number">3</span>
                                <span class="stat-label">Canales</span>
                            </div>
                            <div class="campaign-stat">
                                <span class="stat-number">40+</span>
                                <span class="stat-label">Plantillas</span>
                            </div>
                            <div class="campaign-stat">
                                <span class="stat-number">Real-time</span>
                                <span class="stat-label">Métricas</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="campaigns-grid">
                        <!-- Email Campaigns -->
                        <div class="campaign-mega-card email-campaign">
                            <div class="campaign-header">
                                <div class="campaign-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="campaign-title">
                                    <h4>Email Marketing</h4>
                                    <span class="campaign-subtitle">Campañas profesionales</span>
                                </div>
                            </div>
                            <div class="campaign-features">
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-paint-brush"></i></div>
                                    <div class="feature-details">
                                        <strong>Plantillas Personalizables</strong>
                                        <p>14 campos configurables con diseño responsive</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-filter"></i></div>
                                    <div class="feature-details">
                                        <strong>Segmentación Avanzada</strong>
                                        <p>Filtros dinámicos por criterios múltiples</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-robot"></i></div>
                                    <div class="feature-details">
                                        <strong>Automatización</strong>
                                        <p>Envíos programados y triggers inteligentes</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                                    <div class="feature-details">
                                        <strong>Métricas Completas</strong>
                                        <p>Apertura, clics, conversiones en tiempo real</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- WhatsApp Campaigns -->
                        <div class="campaign-mega-card whatsapp-campaign">
                            <div class="campaign-header">
                                <div class="campaign-icon">
                                    <i class="fab fa-whatsapp"></i>
                                </div>
                                <div class="campaign-title">
                                    <h4>WhatsApp Business</h4>
                                    <span class="campaign-subtitle">Mensajería masiva</span>
                                </div>
                            </div>
                            <div class="campaign-features">
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-file-alt"></i></div>
                                    <div class="feature-details">
                                        <strong>Plantillas Oficiales</strong>
                                        <p>13 campos con aprobación de WhatsApp</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-plug"></i></div>
                                    <div class="feature-details">
                                        <strong>Integración API</strong>
                                        <p>Conexión directa con WhatsApp Business</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-comments"></i></div>
                                    <div class="feature-details">
                                        <strong>Chatbots</strong>
                                        <p>Respuestas automáticas y flujos inteligentes</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-eye"></i></div>
                                    <div class="feature-details">
                                        <strong>Tracking Avanzado</strong>
                                        <p>Estado, lectura, respuesta en tiempo real</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SMS Campaigns -->
                        <div class="campaign-mega-card sms-campaign">
                            <div class="campaign-header">
                                <div class="campaign-icon">
                                    <i class="fas fa-sms"></i>
                                </div>
                                <div class="campaign-title">
                                    <h4>SMS Marketing</h4>
                                    <span class="campaign-subtitle">Mensajes directos</span>
                                </div>
                            </div>
                            <div class="campaign-features">
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-text-width"></i></div>
                                    <div class="feature-details">
                                        <strong>Plantillas de Texto</strong>
                                        <p>Personalización con variables dinámicas</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-users"></i></div>
                                    <div class="feature-details">
                                        <strong>Envío Masivo</strong>
                                        <p>Gestión eficiente de listas de contactos</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-check-circle"></i></div>
                                    <div class="feature-details">
                                        <strong>Confirmación Entrega</strong>
                                        <p>Tracking completo del estado de envío</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon"><i class="fas fa-clock"></i></div>
                                    <div class="feature-details">
                                        <strong>Programación</strong>
                                        <p>Envíos diferidos y campañas recurrentes</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="campaigns-workflow">
                        <h3>🔗 Flujo de Trabajo Integrado</h3>
                        <div class="workflow-steps">
                            <div class="workflow-step">
                                <div class="step-icon"><i class="fas fa-bullseye"></i></div>
                                <div class="step-content">
                                    <h4>1. Segmentación</h4>
                                    <p>Selección inteligente de audiencia desde leads, contactos o entidades</p>
                                </div>
                            </div>
                            <div class="workflow-step">
                                <div class="step-icon"><i class="fas fa-edit"></i></div>
                                <div class="step-content">
                                    <h4>2. Creación</h4>
                                    <p>Diseño de plantillas personalizadas para cada canal</p>
                                </div>
                            </div>
                            <div class="workflow-step">
                                <div class="step-icon"><i class="fas fa-rocket"></i></div>
                                <div class="step-content">
                                    <h4>3. Ejecución</h4>
                                    <p>Envío automático o manual con programación avanzada</p>
                                </div>
                            </div>
                            <div class="workflow-step">
                                <div class="step-icon"><i class="fas fa-chart-bar"></i></div>
                                <div class="step-content">
                                    <h4>4. Análisis</h4>
                                    <p>Métricas detalladas y optimización de conversiones</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="campaigns-use-cases">
                        <h3>🎯 Casos de Uso Principales</h3>
                        <div class="use-cases-grid">
                            <div class="use-case-item">
                                <i class="fas fa-hand-wave"></i>
                                <h4>Onboarding</h4>
                                <p>Bienvenida automática a nuevos leads con secuencia de emails</p>
                            </div>
                            <div class="use-case-item">
                                <i class="fas fa-seedling"></i>
                                <h4>Lead Nurturing</h4>
                                <p>Cultivo de leads en pipeline con contenido personalizado</p>
                            </div>
                            <div class="use-case-item">
                                <i class="fas fa-calendar-check"></i>
                                <h4>Event Marketing</h4>
                                <p>Invitaciones y recordatorios para eventos y webinars</p>
                            </div>
                            <div class="use-case-item">
                                <i class="fas fa-handshake"></i>
                                <h4>Post-Venta</h4>
                                <p>Seguimiento y satisfacción del cliente tras la compra</p>
                            </div>
                            <div class="use-case-item">
                                <i class="fas fa-redo"></i>
                                <h4>Reactivación</h4>
                                <p>Re-engagement de contactos inactivos con ofertas especiales</p>
                            </div>
                            <div class="use-case-item">
                                <i class="fas fa-birthday-cake"></i>
                                <h4>Fechas Especiales</h4>
                                <p>Campañas automáticas para cumpleaños y aniversarios</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="campaign-queries">
                    <h3>🔍 Queries de Campañas</h3>
                    
                    <div class="query-examples">
                        <h4>Consultas Principales:</h4>
                        <pre><code class="language-graphql"># Obtener todas las campañas
query GetCampaigns {
  getCRMCampaigns {
    campaigns {
      _id
      name
      type
      status
      createdAt
      scheduledAt
      targetAudience
      metrics {
        sent
        delivered
        opened
        clicked
        converted
      }
    }
  }
}

# Obtener estadísticas de campaña
query GetCampaignStats($campaignId: ID!) {
  getCRMCampaignStats(campaignId: $campaignId) {
    totalSent
    totalDelivered
    totalOpened
    totalClicked
    totalConverted
    conversionRate
    openRate
    clickRate
    deliveryRate
  }
}

# Obtener plantillas de email
query GetEmailTemplates {
  getCRMEmailTemplates {
    templates {
      _id
      name
      subject
      content
      variables
      isActive
      createdAt
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-calendar-alt"></i>
                    Gestión de Eventos y Invitados
                </h2>

                <div class="events-overview">
                    <h3>🎉 Sistema de Eventos</h3>
                    <p>El sistema incluye gestión completa de eventos con invitados, permisos, presupuestos y seguimiento.</p>
                </div>

                <div class="event-queries">
                    <h3>🔍 Consultas de Eventos</h3>
                    
                    <div class="query-examples">
                        <h4>Búsqueda por Teléfono/Email:</h4>
                        <pre><code class="language-graphql"># Buscar eventos por teléfono del usuario
query GetEventsByPhone($phone: String!) {
  getAllUserRelatedEventsByPhone(phone: $phone) {
    _id
    name
    date
    location
    status
    role
    permissions
  }
}

# Buscar eventos por email del usuario
query GetEventsByEmail($email: String!) {
  getAllUserRelatedEventsByEmail(email: $email) {
    _id
    name
    date
    location
    status
    role
    permissions
  }
}

# Obtener evento específico con detalles
query GetEvent($eventId: ID!) {
  getEvent(eventId: $eventId) {
    _id
    name
    description
    date
    location
    status
    budget {
      total
      spent
      remaining
    }
    guests {
      _id
      name
      email
      phone
      status
      role
    }
    tasks {
      _id
      title
      description
      assignedTo
      dueDate
      status
    }
  }
}</code></pre>
                    </div>
                </div>

                <div class="event-permissions">
                    <h3>🔐 Permisos de Eventos</h3>
                    
                    <div class="permission-types">
                        <h4>Tipos de Permisos:</h4>
                        <ul>
                            <li><strong>Owner</strong> - Propietario del evento (acceso completo)</li>
                            <li><strong>Admin</strong> - Administrador (gestión completa)</li>
                            <li><strong>Manager</strong> - Gestor (edición y gestión)</li>
                            <li><strong>Editor</strong> - Editor (modificación limitada)</li>
                            <li><strong>Viewer</strong> - Visualizador (solo lectura)</li>
                            <li><strong>Guest</strong> - Invitado (acceso básico)</li>
                        </ul>
                    </div>

                    <div class="permission-queries">
                        <h4>Consultas de Permisos:</h4>
                        <pre><code class="language-graphql"># Verificar permisos de usuario en evento
query CheckEventPermissions($eventId: ID!, $userId: ID!) {
  getEventPermissions(eventId: $eventId, userId: $userId) {
    canView
    canEdit
    canDelete
    canManageGuests
    canManageBudget
    canManageTasks
    role
    permissions
  }
}

# Obtener resumen de permisos del usuario
query GetUserEventSummary($userId: ID!) {
  getUserCompleteEventSummary(userId: $userId) {
    ownedEvents
    managedEvents
    invitedEvents
    totalEvents
    upcomingEvents
    pastEvents
  }
}</code></pre>
                    </div>
                </div>

                <div class="event-management">
                    <h3>⚙️ Gestión de Eventos</h3>
                    
                    <div class="management-features">
                        <h4>Funcionalidades:</h4>
                        <ul>
                            <li><strong>Presupuesto</strong> - Control de gastos y categorías</li>
                            <li><strong>Tareas</strong> - Asignación y seguimiento</li>
                            <li><strong>Itinerario</strong> - Agenda y programación</li>
                            <li><strong>Invitados</strong> - Lista de asistencia y roles</li>
                            <li><strong>Métricas</strong> - Estadísticas de participación</li>
                        </ul>
                    </div>

                    <div class="event-mutations">
                        <h4>Operaciones de Eventos:</h4>
                        <pre><code class="language-graphql"># Compartir evento con usuario
mutation ShareEvent($eventId: ID!, $userId: ID!, $permissions: [String!]!) {
  shareEvent(eventId: $eventId, userId: $userId, permissions: $permissions) {
    success
    message
    sharedWith {
      _id
      name
      email
      permissions
    }
  }
}

# Crear tarea en evento
mutation CreateEventTask($eventId: ID!, $task: TaskInput!) {
  createEventTask(eventId: $eventId, task: $task) {
    _id
    title
    description
    assignedTo
    dueDate
    status
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Permissions Section -->
        <section id="permissions" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-shield-alt"></i>
                    Sistema de Permisos y Compartir
                </h2>

                <div class="permissions-overview">
                    <h3>🔐 Control de Acceso Granular</h3>
                    <p>El sistema implementa un modelo de permisos avanzado que permite compartir recursos de forma segura y controlada.</p>
                </div>

                <div class="sharing-system">
                    <h3>🤝 Sistema de Compartir</h3>
                    
                    <div class="sharing-types">
                        <h4>Recursos Compartibles:</h4>
                        <ul>
                            <li><strong>Leads</strong> - Compartir oportunidades con equipo</li>
                            <li><strong>Contactos</strong> - Acceso a información de clientes</li>
                            <li><strong>Entidades</strong> - Compartir empresas/organizaciones</li>
                            <li><strong>Eventos</strong> - Colaboración en gestión</li>
                            <li><strong>Configuraciones</strong> - Compartir vistas y filtros</li>
                        </ul>
                    </div>

                    <div class="sharing-mutations">
                        <h4>Operaciones de Compartir:</h4>
                        <pre><code class="language-graphql"># Compartir lead con usuario
mutation ShareLead($leadId: ID!, $userId: ID!, $permissions: [String!]!) {
  shareCRMLead(leadId: $leadId, userId: $userId, permissions: $permissions) {
    success
    message
    sharedWith {
      _id
      name
      email
      permissions
    }
  }
}

# Compartir contacto con usuario
mutation ShareContact($contactId: ID!, $userId: ID!, $permissions: [String!]!) {
  shareCRMContact(contactId: $contactId, userId: $userId, permissions: $permissions) {
    success
    message
    sharedWith {
      _id
      name
      email
      permissions
    }
  }
}

# Compartir entidad con usuario
mutation ShareEntity($entityId: ID!, $userId: ID!, $permissions: [String!]!) {
  shareCRMEntity(entityId: $entityId, userId: $userId, permissions: $permissions) {
    success
    message
    sharedWith {
      _id
      name
      email
      permissions
    }
  }
}</code></pre>
                    </div>
                </div>

                <div class="permission-levels">
                    <h3>📊 Niveles de Permiso</h3>
                    
                    <div class="permission-matrix">
                        <h4>Matriz de Permisos:</h4>
                        <table class="permission-table">
                            <thead>
                                <tr>
                                    <th>Permiso</th>
                                    <th>Leer</th>
                                    <th>Editar</th>
                                    <th>Eliminar</th>
                                    <th>Compartir</th>
                                    <th>Administrar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Owner</strong></td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>✅</td>
                                </tr>
                                <tr>
                                    <td><strong>Admin</strong></td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>✅</td>
                                </tr>
                                <tr>
                                    <td><strong>Manager</strong></td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>❌</td>
                                    <td>✅</td>
                                    <td>❌</td>
                                </tr>
                                <tr>
                                    <td><strong>Editor</strong></td>
                                    <td>✅</td>
                                    <td>✅</td>
                                    <td>❌</td>
                                    <td>❌</td>
                                    <td>❌</td>
                                </tr>
                                <tr>
                                    <td><strong>Viewer</strong></td>
                                    <td>✅</td>
                                    <td>❌</td>
                                    <td>❌</td>
                                    <td>❌</td>
                                    <td>❌</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="access-control">
                    <h3>🚪 Control de Acceso</h3>
                    
                    <div class="access-features">
                        <h4>Características:</h4>
                        <ul>
                            <li><strong>Heredado</strong> - Los permisos se heredan de entidades padre</li>
                            <li><strong>Temporal</strong> - Permisos con fecha de expiración</li>
                            <li><strong>Condicional</strong> - Permisos basados en reglas de negocio</li>
                            <li><strong>Auditoría</strong> - Log completo de accesos y cambios</li>
                            <li><strong>Notificaciones</strong> - Alertas de acceso y cambios</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat System Section -->
        <section id="chat-system" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-comments"></i>
                    💬 Sistema de Chat en Tiempo Real
                </h2>

                <div class="chat-overview">
                    <h3>📱 FUNCIONALIDADES DEL SISTEMA DE CHAT</h3>
                    <p>El sistema de chat permite comunicación en tiempo real entre usuarios con soporte para mensajes multimedia, gestión de conversaciones grupales y tracking detallado de uso y costos de IA.</p>
                    
                    <div class="chat-features-grid">
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-comment-dots"></i></div>
                            <h4>Chat Individual</h4>
                            <p>Conversaciones privadas entre dos usuarios</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-users"></i></div>
                            <h4>Chat Grupal</h4>
                            <p>Conversaciones con múltiples participantes</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-calendar-alt"></i></div>
                            <h4>Chat de Eventos</h4>
                            <p>Conversaciones específicas para eventos</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-images"></i></div>
                            <h4>Multimedia</h4>
                            <p>Soporte para texto, imágenes, audio, video y documentos</p>
                        </div>
                    </div>
                </div>

                <div class="chat-api-section">
                    <h3>🔧 API GraphQL del Sistema de Chat</h3>
                    
                    <div class="api-category">
                        <h4>📥 Queries Disponibles</h4>
                        <div class="code-examples">
                            <div class="code-example">
                                <h5>Obtener chats del usuario</h5>
                                <pre><code class="language-graphql">query GetUserChats($userId: String!, $limit: Int, $skip: Int) {
  CHAT_getUserChats(userId: $userId, limit: $limit, skip: $skip) {
    total
    chats {
      _id
      titulo
      tipo
      participantes
      metadata {
        fecha_creacion
        fecha_ultima_actividad
        activo
      }
      mensajes {
        mensaje
        fecha_creacion
        emisor
        tipo
      }
    }
    hasNextPage
  }
}</code></pre>
                            </div>
                            
                            <div class="code-example">
                                <h5>Obtener mensajes de un chat</h5>
                                <pre><code class="language-graphql">query GetChatMessages($chatId: String!, $limit: Int, $skip: Int) {
  CHAT_getChatMessages(chatId: $chatId, limit: $limit, skip: $skip) {
    total
    messages {
      _id
      mensaje
      tipo
      fecha_creacion
      emisor
      receptor
      estatus
      metadata {
        fileSize
        fileName
        mimeType
      }
    }
    hasNextPage
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-category">
                        <h4>📤 Mutaciones Disponibles</h4>
                        <div class="code-examples">
                            <div class="code-example">
                                <h5>Crear nuevo chat</h5>
                                <pre><code class="language-graphql">mutation CreateChat($input: CHAT_CreateChatInput!, $creadoPor: String!) {
  CHAT_createChat(input: $input, creadoPor: $creadoPor) {
    _id
    titulo
    tipo
    participantes
    metadata {
      fecha_creacion
      creado_por
      activo
    }
  }
}</code></pre>
                            </div>
                            
                            <div class="code-example">
                                <h5>Enviar mensaje</h5>
                                <pre><code class="language-graphql">mutation SendMessage($chatId: String!, $input: CHAT_CreateMessageInput!, $emisorId: String!) {
  CHAT_sendMessage(chatId: $chatId, input: $input, emisorId: $emisorId) {
    _id
    mensaje
    tipo
    fecha_creacion
    emisor
    receptor
    estatus
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-category">
                        <h4>🔄 Subscripciones en Tiempo Real</h4>
                        <div class="code-examples">
                            <div class="code-example">
                                <h5>Nuevo mensaje en chat</h5>
                                <pre><code class="language-graphql">subscription NewMessage($chatId: String!) {
  CHAT_newMessage(chatId: $chatId) {
    _id
    mensaje
    tipo
    fecha_creacion
    emisor
    receptor
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-storage-section">
                    <h3>🗄️ Almacenamiento de Información</h3>
                    
                    <div class="storage-info">
                        <div class="storage-card">
                            <h4>📊 Base de Datos Principal</h4>
                            <p><strong>MongoDB Atlas:</strong> <code>api-directorio-bodas</code></p>
                            <ul>
                                <li><strong>Colección:</strong> <code>chats</code> - Conversaciones principales</li>
                                <li><strong>Colección:</strong> <code>usage_tracking</code> - Tracking de tokens y costos</li>
                                <li><strong>Colección:</strong> <code>developmentmessages</code> - Mensajes de desarrollo</li>
                            </ul>
                        </div>
                        
                        <div class="storage-card">
                            <h4>📊 Base de Datos de Eventos</h4>
                            <p><strong>MongoDB Atlas:</strong> <code>prueba1</code></p>
                            <ul>
                                <li><strong>Colección:</strong> <code>chats</code> - Chats relacionados con eventos</li>
                                <li><strong>Colección:</strong> <code>messages</code> - Mensajes individuales</li>
                                <li><strong>Colección:</strong> <code>eventos</code> - Eventos principales</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- WhatsApp Business API Section -->
        <section id="whatsapp-business" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-whatsapp"></i>
                    📱 WhatsApp Business API - Integración Completa
                </h2>

                <div class="whatsapp-overview">
                    <h3>🚀 FUNCIONALIDADES DE WHATSAPP BUSINESS API</h3>
                    <p>El sistema implementa una integración completa con WhatsApp Business API, permitiendo a cada marca blanca gestionar múltiples números de WhatsApp con configuración avanzada de webhooks, plantillas y tracking.</p>
                    
                    <div class="whatsapp-features-grid">
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-phone"></i></div>
                            <h4>Múltiples Números</h4>
                            <p>Cada marca blanca puede tener varios números de WhatsApp</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-webhook"></i></div>
                            <h4>Webhooks Avanzados</h4>
                            <p>Configuración completa de webhooks para recibir mensajes</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-file-alt"></i></div>
                            <h4>Plantillas de Mensajes</h4>
                            <p>Gestión de plantillas aprobadas por WhatsApp</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon"><i class="fas fa-cogs"></i></div>
                            <h4>Integración N8N</h4>
                            <p>Configuración automática con workflows de N8N</p>
                        </div>
                    </div>
                </div>

                <div class="whatsapp-structure">
                    <h3>🏗️ Estructura de Datos</h3>
                    
                    <div class="structure-example">
                        <h4>Configuración de Número de WhatsApp</h4>
                        <pre><code class="language-json">{
  "id": "whatsapp_001",
  "phoneNumber": "+1234567890",
  "phoneNumberId": "123456789012345",
  "displayName": "Ventas ABC",
  "verifiedName": "ABC Company",
  "qualityRating": "GREEN",
  "status": "CONNECTED",
  "isActive": true,
  "isDefault": true,
  "description": "Número principal para ventas",
  
  "accessToken": "EAAxxxxxxxxxxxx",
  "webhookUrl": "https://api.example.com/webhook/whatsapp",
  "webhookVerifyToken": "verify_token_123",
  "webhookSecret": "webhook_secret_456",
  "webhookEvents": ["messages", "message_deliveries", "message_reads"],
  
  "messageTemplates": [
    {
      "templateId": "welcome_template",
      "templateName": "Bienvenida",
      "category": "UTILITY",
      "language": "es",
      "status": "APPROVED",
      "parameters": ["name", "company"]
    }
  ],
  
  "rateLimits": {
    "messagesPerSecond": 1,
    "messagesPerDay": 1000,
    "messagesPerMonth": 10000
  },
  
  "tracking": {
    "deliveryReports": true,
    "readReceipts": true,
    "typingIndicators": false,
    "messageStatus": true
  },
  
  "n8nIntegration": {
    "webhookUrl": "https://n8n.example.com/webhook/whatsapp",
    "workflowId": "whatsapp_workflow_123",
    "isEnabled": true
  }
}</code></pre>
                    </div>
                </div>

                <div class="whatsapp-api-section">
                    <h3>🔧 API GraphQL para WhatsApp</h3>
                    
                    <div class="api-category">
                        <h4>📥 Queries Disponibles</h4>
                        <div class="code-examples">
                            <div class="code-example">
                                <h5>Obtener números de WhatsApp de una marca blanca</h5>
                                <pre><code class="language-graphql">query GetWhitelabelWhatsAppNumbers($whitelabelId: ID!) {
  getWhitelabelWhatsAppNumbers(whitelabelId: $whitelabelId) {
    id
    phoneNumber
    phoneNumberId
    displayName
    verifiedName
    qualityRating
    status
    isActive
    isDefault
    description
    webhookUrl
    webhookEvents
    messageTemplates {
      templateId
      templateName
      category
      language
      status
    }
    rateLimits {
      messagesPerSecond
      messagesPerDay
      messagesPerMonth
    }
    tracking {
      deliveryReports
      readReceipts
      typingIndicators
      messageStatus
    }
    n8nIntegration {
      webhookUrl
      workflowId
      isEnabled
    }
  }
}</code></pre>
                            </div>
                            
                            <div class="code-example">
                                <h5>Obtener número por teléfono</h5>
                                <pre><code class="language-graphql">query GetWhatsAppNumberByPhone($phoneNumber: String!) {
  getWhatsAppNumberByPhone(phoneNumber: $phoneNumber) {
    success
    message
    whatsappNumber {
      id
      phoneNumber
      displayName
      status
      isActive
      webhookUrl
    }
    errors
  }
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="api-category">
                        <h4>📤 Mutaciones Disponibles</h4>
                        <div class="code-examples">
                            <div class="code-example">
                                <h5>Agregar número de WhatsApp</h5>
                                <pre><code class="language-graphql">mutation AddWhatsAppNumber($whitelabelId: ID!, $input: WhatsAppNumberInput!) {
  addWhatsAppNumber(whitelabelId: $whitelabelId, input: $input) {
    success
    message
    whatsappNumber {
      id
      phoneNumber
      displayName
      status
      isActive
    }
    errors
  }
}</code></pre>
                            </div>
                            
                            <div class="code-example">
                                <h5>Configurar webhook de WhatsApp</h5>
                                <pre><code class="language-graphql">mutation ConfigureWhatsAppWebhook(
  $whitelabelId: ID!
  $numberId: ID!
  $webhookUrl: String!
  $webhookVerifyToken: String!
  $webhookSecret: String!
  $webhookEvents: [String!]!
) {
  configureWhatsAppWebhook(
    whitelabelId: $whitelabelId
    numberId: $numberId
    webhookUrl: $webhookUrl
    webhookVerifyToken: $webhookVerifyToken
    webhookSecret: $webhookSecret
    webhookEvents: $webhookEvents
  ) {
    success
    message
    webhookUrl
    webhookEvents
    errors
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="whatsapp-integration-section">
                    <h3>🔗 Integración con N8N</h3>
                    <p>El sistema se integra automáticamente con N8N para procesar mensajes de WhatsApp:</p>
                    
                    <div class="integration-flow">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Recepción de Mensaje</h4>
                                <p>WhatsApp envía mensaje al webhook configurado</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Procesamiento N8N</h4>
                                <p>N8N procesa el mensaje y genera respuesta con IA</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Envió de Respuesta</h4>
                                <p>Respuesta se envía de vuelta a WhatsApp</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Tracking de Costos</h4>
                                <p>Se registran tokens y costos automáticamente</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="whatsapp-storage-section">
                    <h3>🗄️ Almacenamiento de Configuración</h3>
                    
                    <div class="storage-info">
                        <div class="storage-card">
                            <h4>📊 Base de Datos Principal</h4>
                            <p><strong>MongoDB Atlas:</strong> <code>api-directorio-bodas</code></p>
                            <ul>
                                <li><strong>Colección:</strong> <code>whitelabels</code> - Configuración de WhatsApp por marca blanca</li>
                                <li><strong>Campo:</strong> <code>whatsapp.numbers</code> - Array de números de WhatsApp</li>
                                <li><strong>Campo:</strong> <code>whatsapp.businessAccount</code> - Cuenta de negocio de Meta</li>
                            </ul>
                        </div>
                        
                        <div class="storage-card">
                            <h4>📊 Configuración por Número</h4>
                            <p>Cada número de WhatsApp incluye:</p>
                            <ul>
                                <li><strong>API Configuration:</strong> Tokens, webhooks, eventos</li>
                                <li><strong>Message Templates:</strong> Plantillas aprobadas por WhatsApp</li>
                                <li><strong>Rate Limits:</strong> Límites de envío por período</li>
                                <li><strong>Tracking:</strong> Configuración de seguimiento</li>
                                <li><strong>N8N Integration:</strong> URLs y workflows</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Token Tracking Section -->
        <section id="token-tracking" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-coins"></i>
                    💰 Sistema de Tracking de Tokens y Costos de IA
                </h2>

                <div class="tracking-overview">
                    <h3>📊 SISTEMA DE FACTURACIÓN Y COSTOS</h3>
                    <p>El sistema implementa un tracking completo de tokens y costos para todas las interacciones con IA, incluyendo modelos de OpenAI, Claude, y otros proveedores.</p>
                    
                    <div class="tracking-features">
                        <div class="tracking-feature">
                            <div class="feature-icon"><i class="fas fa-calculator"></i></div>
                            <h4>Cálculo Automático</h4>
                            <p>Cálculo en tiempo real de costos por token</p>
                        </div>
                        <div class="tracking-feature">
                            <div class="feature-icon"><i class="fas fa-database"></i></div>
                            <h4>Almacenamiento</h4>
                            <p>Registro detallado en MongoDB Atlas</p>
                        </div>
                        <div class="tracking-feature">
                            <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                            <h4>Análisis</h4>
                            <p>Métricas y tendencias de uso</p>
                        </div>
                        <div class="tracking-feature">
                            <div class="feature-icon"><i class="fas fa-receipt"></i></div>
                            <h4>Facturación</h4>
                            <p>Generación de reportes por período</p>
                        </div>
                    </div>
                </div>

                <div class="cost-configuration">
                    <h3>⚙️ Configuración de Costos</h3>
                    
                    <div class="cost-models">
                        <h4>🤖 Modelos de IA Soportados</h4>
                        <div class="cost-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Modelo</th>
                                        <th>Input Token</th>
                                        <th>Output Token</th>
                                        <th>Memoria Base</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>llama3.2:3b</code></td>
                                        <td>$0.0001</td>
                                        <td>$0.0002</td>
                                        <td>512 MB</td>
                                    </tr>
                                    <tr>
                                        <td><code>claude-3-sonnet</code></td>
                                        <td>$0.003</td>
                                        <td>$0.015</td>
                                        <td>1024 MB</td>
                                    </tr>
                                    <tr>
                                        <td><code>gpt-4</code></td>
                                        <td>$0.03</td>
                                        <td>$0.06</td>
                                        <td>2048 MB</td>
                                    </tr>
                                    <tr>
                                        <td><code>gpt-3.5-turbo</code></td>
                                        <td>$0.0015</td>
                                        <td>$0.002</td>
                                        <td>512 MB</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="infrastructure-costs">
                        <h4>🏗️ Costos de Infraestructura</h4>
                        <div class="cost-list">
                            <div class="cost-item">
                                <strong>Memoria:</strong> $0.0001 por MB/segundo
                            </div>
                            <div class="cost-item">
                                <strong>Almacenamiento:</strong> $0.023 por GB/mes
                            </div>
                            <div class="cost-item">
                                <strong>Computación:</strong> $0.10 por hora
                            </div>
                            <div class="cost-item">
                                <strong>Ancho de Banda:</strong> $0.09 por GB
                            </div>
                            <div class="cost-item">
                                <strong>Herramientas MCP:</strong> $0.001 por uso
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tracking-structure">
                    <h3>📋 Estructura de Tracking</h3>
                    
                    <div class="tracking-example">
                        <h4>Ejemplo de Registro de Tracking</h4>
                        <pre><code class="language-json">{
  "session_id": "session_12345",
  "client_number": "+1234567890",
  "business_number": "+0987654321",
  "chat_id": "chat_67890",
  "message_id": "msg_54321",
  "source": "whatsapp",
  "message_text": "Hola, necesito ayuda con mi pedido",
  "response_text": "Hola! Te ayudo con tu pedido...",
  "billing_items": [
    {
      "type": "ai_tokens",
      "category": "ai",
      "description": "GPT-4 Tokens",
      "quantity": 150,
      "unit": "tokens",
      "unit_cost_usd": 0.03,
      "total_cost_usd": 4.50,
      "metadata": {
        "model": "gpt-4",
        "input_tokens": 100,
        "output_tokens": 50
      }
    }
  ],
  "total_cost_usd": 4.50,
  "total_processing_time_ms": 2500,
  "development": "production",
  "error_occurred": false,
  "billing_period": "2025-01",
  "billed": false
}</code></pre>
                    </div>
                </div>

                <div class="tracking-queries">
                    <h3>🔍 Queries para Consultar Costos</h3>
                    
                    <div class="query-examples">
                        <div class="query-example">
                            <h4>Obtener costos por período</h4>
                            <pre><code class="language-graphql">query GetCostsByPeriod($period: String!, $clientNumber: String) {
  getUsageTracking(period: $period, clientNumber: $clientNumber) {
    total_cost_usd
    total_tokens
    billing_items {
      type
      description
      quantity
      unit_cost_usd
      total_cost_usd
    }
  }
}</code></pre>
                        </div>
                        
                        <div class="query-example">
                            <h4>Obtener estadísticas de uso</h4>
                            <pre><code class="language-graphql">query GetUsageStats($clientNumber: String!, $startDate: String!, $endDate: String!) {
  getUsageStats(clientNumber: $clientNumber, startDate: $startDate, endDate: $endDate) {
    total_cost_usd
    total_messages
    average_cost_per_message
    most_used_model
    cost_by_category {
      ai
      infrastructure
      storage
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="integration-info">
                    <h3>🔗 Integración con N8N</h3>
                    <p>El sistema de tracking se integra automáticamente con N8N para capturar todos los costos de IA en tiempo real:</p>
                    
                    <div class="integration-flow">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Captura Automática</h4>
                                <p>N8N captura automáticamente tokens y costos en cada interacción</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Cálculo en Tiempo Real</h4>
                                <p>Se calculan los costos basados en el modelo utilizado</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Almacenamiento</h4>
                                <p>Los datos se guardan en MongoDB Atlas para facturación</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Reportes</h4>
                                <p>Se generan reportes automáticos por período</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Complete Systems Section -->
        <section id="complete-systems" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-share-alt"></i>
                    🎯 Sistemas Completos de Compartición y Control de Acceso
                </h2>

                <div class="systems-overview">
                    <h3>📋 RESUMEN EJECUTIVO DE TODOS LOS SISTEMAS</h3>
                    <p>El sistema implementa <strong>10 sistemas diferentes</strong>, cada uno con su propia lógica y estructura:</p>
                    
                    <div class="systems-grid">
                        <div class="system-card">
                            <h4>🏢 CRM System</h4>
                            <ul>
                                <li>Leads, Contactos, Entidades</li>
                                <li>Ownership + Shared Users + Groups</li>
                                <li>Multi-tenant por development</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>🎉 Event System</h4>
                            <ul>
                                <li>Eventos + Invitados</li>
                                <li>Roles: CREADOR, COMPARTIDO, INVITADO</li>
                                <li>Permisos granulares por funcionalidad</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>📝 Blog/Post System</h4>
                            <ul>
                                <li>Publicaciones y artículos</li>
                                <li>Compartición por usuario y business</li>
                                <li>Control de acceso por development</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>⚙️ ViewConfig System</h4>
                            <ul>
                                <li>Configuraciones de vista</li>
                                <li>Permisos: View, Edit, Delete, Share</li>
                                <li>Compartición con usuarios específicos</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>👥 Group System</h4>
                            <ul>
                                <li>Grupos de usuarios</li>
                                <li>Permisos a nivel de grupo</li>
                                <li>Filtros y configuraciones compartidas</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>🏪 Business System</h4>
                            <ul>
                                <li>Negocios y empresas</li>
                                <li>Usuarios asociados</li>
                                <li>Configuraciones por business</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>👤 User System</h4>
                            <ul>
                                <li>Usuarios y autenticación</li>
                                <li>Roles y permisos</li>
                                <li>Desarrollos autorizados</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>💬 Chat System</h4>
                            <ul>
                                <li>Chat individual, grupal y por eventos</li>
                                <li>Mensajes multimedia</li>
                                <li>Subscripciones en tiempo real</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>💰 Token Tracking</h4>
                            <ul>
                                <li>Tracking de costos de IA</li>
                                <li>Facturación automática</li>
                                <li>Integración con N8N</li>
                            </ul>
                        </div>
                        
                        <div class="system-card">
                            <h4>📱 WhatsApp Business API</h4>
                            <ul>
                                <li>Múltiples números por marca blanca</li>
                                <li>Webhooks y plantillas</li>
                                <li>Integración completa con N8N</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="real-examples">
                    <h3>🔍 CASOS DE USO REALES Y EJEMPLOS PRÁCTICOS</h3>
                    
                    <div class="example-scenario">
                        <h4>📊 CASO 1: Lead Compartido entre Equipo de Ventas</h4>
                        <p><strong>Escenario:</strong> Un lead de alta prioridad es compartido entre el vendedor principal, su manager y un especialista técnico.</p>
                        
                        <pre><code class="language-graphql"># 1. Crear el lead (propietario principal)
mutation CreateLead {
  createCRMLead(input: {
    name: "Empresa ABC - Proyecto CRM"
    email: "contacto@empresaabc.com"
    company: "Empresa ABC"
    value: 50000
    priority: HIGH
    source: WEBSITE
  }) {
    success
    lead {
      _id
      ownership {
        primary_owner {
          user_id    # "vendedor123"
          name       # "vendedor@empresa.com"
        }
        shared_with_users    # []
        shared_with_groups   # []
      }
    }
  }
}

# 2. Compartir con manager individual
mutation ShareWithManager {
  shareCRMLead(leadId: "lead123", sharing: {
    userIds: ["manager456"]
    groupIds: []
    permissions: ["VIEW", "EDIT", "ADD_NOTES"]
  }) {
    success
    lead {
      ownership {
        shared_with_users    # ["manager456"]
        shared_with_groups   # []
      }
    }
  }
}</code></pre>

                        <div class="example-result">
                            <h5>🎯 Resultado Final:</h5>
                            <ul>
                                <li><strong>Propietario:</strong> vendedor123 (acceso completo)</li>
                                <li><strong>Compartido individual:</strong> manager456 (ver, editar, notas)</li>
                                <li><strong>Permisos:</strong> Diferentes niveles según el tipo de acceso</li>
                            </ul>
                        </div>
                    </div>

                    <div class="example-scenario">
                        <h4>🎉 CASO 2: Evento de Boda Compartido con Familia y Proveedores</h4>
                        <p><strong>Escenario:</strong> Una boda donde la novia comparte el evento con familiares cercanos y proveedores específicos.</p>
                        
                        <pre><code class="language-graphql"># 1. Crear evento (propietaria principal)
mutation CreateWeddingEvent {
  createEvent(input: {
    nombre: "Boda María y Carlos"
    tipo: "boda"
    fecha: "2025-06-15"
    poblacion: "Madrid"
    usuario_id: "maria_novia"
    usuario_nombre: "maria@email.com"
  }) {
    _id
    usuario_id        # "maria_novia"
    compartido_array  # []
    user_role         # "CREADOR"
    user_permissions  # ["FULL_ACCESS"]
  }
}

# 2. Compartir con familiares (acceso completo)
mutation ShareWithFamily {
  shareEvent(
    eventId: "event456", 
    userId: "madre_maria", 
    permissions: {
      canViewBudget: true,
      canViewGuests: true,
      canEditEvent: true,
      canInviteGuests: true
    }
  )
}</code></pre>

                        <div class="example-result">
                            <h5>🎯 Resultado Final:</h5>
                            <ul>
                                <li><strong>Propietaria:</strong> maria_novia (acceso completo)</li>
                                <li><strong>Familiar:</strong> madre_maria (acceso completo)</li>
                                <li><strong>Permisos:</strong> Diferentes según el rol y relación</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="validation-flow">
                    <h3>🔐 FLUJO COMPLETO DE VALIDACIÓN Y PERMISOS</h3>
                    
                    <h4>🔄 Proceso de Validación Multi-Nivel</h4>
                    <pre><code class="language-text">┌─────────────────────────────────────────────────────────────────┐
│                FLUJO COMPLETO DE VALIDACIÓN                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────┐ │
│  │   REQUEST      │    │   VALIDACIÓN    │    │   ACCESO    │ │
│  │   INCOMING     │───▶│   MULTI-NIVEL   │───▶│   GRANTED   │ │
│  └─────────────────┘    └─────────────────┘    └─────────────┘ │
│           │                       │                    │        │
│           │                       │                    │        │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────┐ │
│  │   HEADERS       │    │   PASO 1:      │    │   PASO 2:   │ │
│  │   VERIFICATION  │    │   JWT TOKEN     │    │   USER      │ │
│  │                 │    │   VALIDATION    │    │   CONTEXT   │ │
│  │ • Authorization │    │                 │    │             │ │
│  │ • X-User-ID     │    │ • Token válido  │    │ • UID       │ │
│  │ • X-Development │    │ • No expirado   │    │ • Email     │ │
│  └─────────────────┘    │ • Signature OK  │    │ • Phone     │ │
│                          └─────────────────┘    │ • Role      │ │
│                                   │             └─────────────┘ │
│                                   │                     │        │
│                          ┌─────────────────┐    ┌─────────────┐ │
│                          │   PASO 3:      │    │   PASO 4:   │ │
│                          │   DEVELOPMENT   │    │   OWNERSHIP │ │
│                          │   ACCESS        │    │   CHECK     │ │
│                          │                 │    │             │ │
│                          │ • Same tenant   │    │ • Is Owner? │ │
│                          │ • Valid brand   │    │ • Is Shared?│ │
│                          │ • Features OK   │    │ • Is Group? │ │
│                          └─────────────────┘    │ • Permissions│ │
│                                   │             └─────────────┘ │
└─────────────────────────────────────────────────────────────────┘</code></pre>

                    <h4>🔍 Código de Validación Implementado</h4>
                    <pre><code class="language-typescript">// 1. VALIDACIÓN DE DESARROLLO (Multi-tenant)
export function validateDevelopmentAccess(
  context: CRMContext,
  development: string
) {
  if (context.user.development !== development) {
    throw new Error('No tienes acceso a este development');
  }
}

// 2. VALIDACIÓN DE OWNERSHIP
export function validateOwnership(
  document: any,
  userId: string,
  allowShared: boolean = true
) {
  const isOwner = document.ownership?.primary_owner?.user_id === userId;
  const isShared = allowShared && 
    document.ownership?.shared_with_users?.includes(userId);
  
  if (!isOwner && !isShared) {
    throw new Error('No tienes permisos para acceder a este recurso');
  }

  return { isOwner, isShared };
}</code></pre>
                </div>

                <div class="systems-comparison">
                    <h3>📊 COMPARATIVA DE SISTEMAS DE COMPARTICIÓN</h3>
                    
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Sistema</th>
                                <th>Estructura de Ownership</th>
                                <th>Tipos de Compartición</th>
                                <th>Permisos Granulares</th>
                                <th>Multi-Tenant</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>🏢 CRM System</strong></td>
                                <td>primary_owner + shared_with_users + shared_with_groups</td>
                                <td>Individual + Grupos</td>
                                <td>Por rol (Owner, Shared, None)</td>
                                <td>✅ Por development</td>
                            </tr>
                            <tr>
                                <td><strong>🎉 Event System</strong></td>
                                <td>usuario_id + compartido_array + detalles_compartidos_array</td>
                                <td>Individual + Permisos específicos</td>
                                <td>Por funcionalidad (Budget, Guests, etc.)</td>
                                <td>✅ Por development</td>
                            </tr>
                            <tr>
                                <td><strong>📝 Blog/Post System</strong></td>
                                <td>userUid + businessId + development</td>
                                <td>Por business + development</td>
                                <td>Por tenant (business + development)</td>
                                <td>✅ Por business + development</td>
                            </tr>
                            <tr>
                                <td><strong>⚙️ ViewConfig System</strong></td>
                                <td>createdBy + sharedWith + permissions</td>
                                <td>Individual + Permisos específicos</td>
                                <td>View, Edit, Delete, Share</td>
                                <td>✅ Por business</td>
                            </tr>
                            <tr>
                                <td><strong>👥 Group System</strong></td>
                                <td>createdBy + members + permissions</td>
                                <td>Por membresía</td>
                                <td>View, Edit, Delete</td>
                                <td>✅ Por business</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="best-practices">
                    <h3>🚀 MEJORES PRÁCTICAS Y RECOMENDACIONES</h3>
                    
                    <h4>✅ PRÁCTICAS RECOMENDADAS</h4>
                    <ul>
                        <li><strong>Seguridad por defecto:</strong> Siempre validar development access antes de ownership</li>
                        <li><strong>Permisos granulares:</strong> Usar permisos específicos en lugar de roles genéricos</li>
                        <li><strong>Auditoría:</strong> Registrar todas las acciones de compartición</li>
                        <li><strong>Validación en cascada:</strong> JWT → Development → Ownership → Permisos</li>
                        <li><strong>Límites de compartición:</strong> Máximo 50 usuarios individuales, 20 grupos</li>
                    </ul>

                    <h4>⚠️ PRÁCTICAS A EVITAR</h4>
                    <ul>
                        <li><strong>Permisos globales:</strong> No dar acceso completo por defecto</li>
                        <li><strong>Compartición masiva:</strong> Evitar compartir con grupos muy grandes</li>
                        <li><strong>Permisos heredados:</strong> No asumir permisos por pertenencia a grupo</li>
                        <li><strong>Validación única:</strong> No confiar solo en JWT, validar ownership</li>
                        <li><strong>Permisos permanentes:</strong> Revisar regularmente accesos compartidos</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Frontend Section -->
        <section id="frontend" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-code"></i>
                    Configuración Frontend
                </h2>

                <div class="frontend-setup">
                    <h3>⚙️ Configuración del Proyecto</h3>
                    
                    <div class="setup-steps">
                        <h4>1. Instalación de Dependencias</h4>
                        <pre><code class="language-bash">npm install @apollo/client graphql react react-dom typescript
npm install @types/react @types/react-dom @types/node
npm install axios formik yup react-router-dom</code></pre>

                        <h4>2. Configuración de Apollo Client</h4>
                        <pre><code class="language-typescript">import { ApolloClient, InMemoryCache, createHttpLink } from '@apollo/client';
import { setContext } from '@apollo/client/link/context';

const httpLink = createHttpLink({
  uri: 'http://localhost:3000/graphql', // Test
  // uri: 'http://localhost:4000/graphql', // Production
});

const authLink = setContext((_, { headers }) => {
  const token = localStorage.getItem('authToken');
  return {
    headers: {
      ...headers,
      authorization: token ? `Bearer ${token}` : "",
    }
  }
});

const client = new ApolloClient({
  link: authLink.concat(httpLink),
  cache: new InMemoryCache()
});</code></pre>

                        <h4>3. Configuración de Rutas</h4>
                        <pre><code class="language-typescript">import { BrowserRouter, Routes, Route } from 'react-router-dom';

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Dashboard />} />
        <Route path="/leads" element={<Leads />} />
        <Route path="/contacts" element={<Contacts />} />
        <Route path="/entities" element={<Entities />} />
        <Route path="/campaigns" element={<Campaigns />} />
        <Route path="/events" element={<Events />} />
        <Route path="/analytics" element={<Analytics />} />
      </Routes>
    </BrowserRouter>
  );
}</code></pre>
                    </div>
                </div>

                <div class="component-examples">
                    <h3>🧩 Componentes de Ejemplo</h3>
                    
                    <div class="component-card">
                        <h4>Componente de Leads</h4>
                        <pre><code class="language-typescript">import React, { useState, useEffect } from 'react';
import { useQuery, useMutation } from '@apollo/client';
import { GET_CRM_LEADS, UPDATE_CRM_LEAD } from '../graphql/queries';

interface Lead {
  _id: string;
  name: string;
  email: string;
  phone: string;
  company: string;
  status: string;
  value: number;
  probability: number;
  assignedTo: string;
  createdAt: string;
}

const Leads: React.FC = () => {
  const [leads, setLeads] = useState<Lead[]>([]);
  const [loading, setLoading] = useState(true);
  
  const { data, loading: queryLoading } = useQuery(GET_CRM_LEADS, {
    variables: { limit: 50, offset: 0 }
  });

  const [updateLead] = useMutation(UPDATE_CRM_LEAD);

  useEffect(() => {
    if (data?.getCRMLeads?.leads) {
      setLeads(data.getCRMLeads.leads);
      setLoading(false);
    }
  }, [data]);

  const handleStatusChange = async (leadId: string, newStatus: string) => {
    try {
      await updateLead({
        variables: { leadId, updates: { status: newStatus } }
      });
      // Actualizar estado local
    } catch (error) {
      console.error('Error updating lead:', error);
    }
  };

  if (loading) return <div>Cargando leads...</div>;

  return (
    <div className="leads-container">
      <h2>Gestión de Leads</h2>
      <div className="leads-grid">
        {leads.map(lead => (
          <div key={lead._id} className="lead-card">
            <h3>{lead.name}</h3>
            <p>{lead.email}</p>
            <p>{lead.company}</p>
            <select 
              value={lead.status}
              onChange={(e) => handleStatusChange(lead._id, e.target.value)}
            >
              <option value="new">Nuevo</option>
              <option value="contacted">Contactado</option>
              <option value="qualified">Calificado</option>
              <option value="proposal">Propuesta</option>
              <option value="negotiation">Negociación</option>
              <option value="won">Ganado</option>
              <option value="lost">Perdido</option>
            </select>
          </div>
        ))}
      </div>
    </div>
  );
};

export default Leads;</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Whitelabel Section -->
        <section id="whitelabel" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-building"></i>
                    🏢 Sistema Whitelabel y Multi-Tenant
                </h2>

                <div class="whitelabel-overview">
                    <h3>🌐 Arquitectura Multi-Tenant</h3>
                    <p>El sistema implementa una arquitectura completa de marca blanca que permite a diferentes desarrolladores tener sus propios entornos personalizados.</p>
                </div>

                <div class="whitelabel-components">
                    <h3>🏗️ Componentes del Sistema</h3>
                    
                    <div class="component-card">
                        <h4>👨‍💻 WhitelabelDeveloper</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>id</strong> - Identificador único del desarrollador</li>
                                <li><strong>name</strong> - Nombre del desarrollador/empresa</li>
                                <li><strong>email</strong> - Email de contacto</li>
                                <li><strong>permissions</strong> - Array de permisos específicos</li>
                                <li><strong>status</strong> - Estado activo/inactivo</li>
                                <li><strong>created_at</strong> - Fecha de creación</li>
                            </ul>
                        </div>
                    </div>

                    <div class="component-card">
                        <h4>🏷️ WhitelabelInfo</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>whitelabel_id</strong> - ID único de la marca blanca</li>
                                <li><strong>brand_name</strong> - Nombre de la marca</li>
                                <li><strong>logo_url</strong> - URL del logo personalizado</li>
                                <li><strong>color_scheme</strong> - Esquema de colores</li>
                                <li><strong>custom_domain</strong> - Dominio personalizado</li>
                            </ul>
                        </div>
                    </div>

                    <div class="component-card">
                        <h4>⚙️ Development</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>development_id</strong> - ID del entorno</li>
                                <li><strong>title</strong> - Título del development</li>
                                <li><strong>permissions</strong> - Permisos del entorno</li>
                                <li><strong>role</strong> - Rol del usuario en el development</li>
                                <li><strong>status</strong> - Estado del development</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="whitelabel-queries">
                    <h3>🔍 Queries de Whitelabel</h3>
                    
                    <div class="query-examples">
                        <h4>Consultas Principales:</h4>
                        <pre><code class="language-graphql"># Obtener desarrollador por ID
query GetWhitelabelDeveloper($developerId: ID!) {
  getWhitelabelDeveloper(developerId: $developerId) {
    id
    name
    email
    permissions
    status
    created_at
    whitelabel_info {
      whitelabel_id
      brand_name
      logo_url
      color_scheme
      custom_domain
    }
  }
}

# Obtener información de marca blanca
query GetWhitelabelInfo($whitelabelId: ID!) {
  getWhitelabelInfo(whitelabelId: $whitelabelId) {
    whitelabel_id
    brand_name
    logo_url
    color_scheme
    custom_domain
    features {
      crm_enabled
      events_enabled
      campaigns_enabled
      analytics_enabled
    }
    limits {
      max_users
      max_storage
      max_api_calls
    }
  }
}

# Obtener development por usuario
query GetUserDevelopment($userId: ID!) {
  getUserDevelopment(userId: $userId) {
    development_id
    title
    permissions
    role
    status
    whitelabel_info {
      brand_name
      logo_url
    }
  }
}</code></pre>
                    </div>
                </div>

                <div class="whitelabel-mutations">
                    <h3>⚙️ Mutations de Whitelabel</h3>
                    
                    <div class="mutation-examples">
                        <h4>Operaciones Principales:</h4>
                        <pre><code class="language-graphql"># Crear nuevo desarrollador
mutation CreateWhitelabelDeveloper($developer: WhitelabelDeveloperInput!) {
  createWhitelabelDeveloper(developer: $developer) {
    success
    developer {
      id
      name
      email
      status
    }
    errors
  }
}

# Actualizar información de marca blanca
mutation UpdateWhitelabelInfo($whitelabelId: ID!, $updates: WhitelabelInfoInput!) {
  updateWhitelabelInfo(whitelabelId: $whitelabelId, updates: $updates) {
    success
    whitelabel_info {
      whitelabel_id
      brand_name
      logo_url
      color_scheme
    }
    errors
  }
}

# Asignar usuario a development
mutation AssignUserToDevelopment($userId: ID!, $developmentId: ID!, $role: String!) {
  assignUserToDevelopment(userId: $userId, developmentId: $developmentId, role: $role) {
    success
    user {
      uid
      email
      development
      role
    }
    errors
  }
}</code></pre>
                    </div>
                </div>

                <div class="whitelabel-use-cases">
                    <h3>🎯 Casos de Uso del Sistema</h3>
                    
                    <div class="use-case-card">
                        <h4>1. 🏢 Empresa que Vende Software como Servicio</h4>
                        <div class="use-case-content">
                            <h5>Escenario:</h5>
                            <p>Una empresa vende el CRM a diferentes clientes, cada uno con su propia marca y configuración.</p>
                            <h5>Implementación:</h5>
                            <ul>
                                <li>Crear WhitelabelDeveloper para cada cliente</li>
                                <li>Configurar WhitelabelInfo con logo y colores</li>
                                <li>Asignar usuarios al Development correspondiente</li>
                                <li>Configurar permisos específicos por cliente</li>
                            </ul>
                        </div>
                    </div>

                    <div class="use-case-card">
                        <h4>2. 🎨 Agencia de Marketing con Múltiples Clientes</h4>
                        <div class="use-case-content">
                            <h5>Escenario:</h5>
                            <p>Una agencia usa el sistema para gestionar campañas de diferentes clientes.</p>
                            <h5>Implementación:</h5>
                            <ul>
                                <li>Development por cliente con su propia marca</li>
                                <li>Usuarios de la agencia con acceso a múltiples developments</li>
                                <li>Permisos granulares por cliente y funcionalidad</li>
                                <li>Reportes separados por development</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Whitelabel Section -->
        <section id="whitelabel" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-building"></i>
                    🏢 Sistema Whitelabel y Multi-Tenant
                </h2>

                <div class="whitelabel-overview">
                    <h3>🌐 Arquitectura Multi-Tenant</h3>
                    <p>El sistema implementa una arquitectura completa de marca blanca que permite a diferentes desarrolladores tener sus propios entornos personalizados.</p>
                </div>

                <div class="whitelabel-components">
                    <h3>🏗️ Componentes del Sistema</h3>
                    
                    <div class="component-card">
                        <h4>👨‍💻 WhitelabelDeveloper</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>id</strong> - Identificador único del desarrollador</li>
                                <li><strong>name</strong> - Nombre del desarrollador/empresa</li>
                                <li><strong>email</strong> - Email de contacto</li>
                                <li><strong>permissions</strong> - Array de permisos específicos</li>
                                <li><strong>status</strong> - Estado activo/inactivo</li>
                                <li><strong>created_at</strong> - Fecha de creación</li>
                            </ul>
                        </div>
                    </div>

                    <div class="component-card">
                        <h4>🏷️ WhitelabelInfo</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>whitelabel_id</strong> - ID único de la marca blanca</li>
                                <li><strong>brand_name</strong> - Nombre de la marca</li>
                                <li><strong>logo_url</strong> - URL del logo personalizado</li>
                                <li><strong>color_scheme</strong> - Esquema de colores</li>
                                <li><strong>custom_domain</strong> - Dominio personalizado</li>
                            </ul>
                        </div>
                    </div>

                    <div class="component-card">
                        <h4>⚙️ Development</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>development_id</strong> - ID del entorno</li>
                                <li><strong>title</strong> - Título del development</li>
                                <li><strong>permissions</strong> - Permisos del entorno</li>
                                <li><strong>role</strong> - Rol del usuario en el development</li>
                                <li><strong>status</strong> - Estado del development</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="whitelabel-queries">
                    <h3>🔍 Queries de Whitelabel</h3>
                    
                    <div class="query-examples">
                        <h4>Consultas Principales:</h4>
                        <pre><code class="language-graphql"># Obtener desarrollador por ID
query GetWhitelabelDeveloper($developerId: ID!) {
  getWhitelabelDeveloper(developerId: $developerId) {
    id
    name
    email
    permissions
    status
    created_at
    whitelabel_info {
      whitelabel_id
      brand_name
      logo_url
      color_scheme
      custom_domain
    }
  }
}

# Obtener información de marca blanca
query GetWhitelabelInfo($whitelabelId: ID!) {
  getWhitelabelInfo(whitelabelId: $whitelabelId) {
    whitelabel_id
    brand_name
    logo_url
    color_scheme
    custom_domain
    features {
      crm_enabled
      events_enabled
      campaigns_enabled
      analytics_enabled
    }
    limits {
      max_users
      max_storage
      max_api_calls
    }
  }
}

# Obtener development por usuario
query GetUserDevelopment($userId: ID!) {
  getUserDevelopment(userId: $userId) {
    development_id
    title
    permissions
    role
    status
    whitelabel_info {
      brand_name
      logo_url
    }
  }
}</code></pre>
                    </div>
                </div>

                <div class="whitelabel-mutations">
                    <h3>⚙️ Mutations de Whitelabel</h3>
                    
                    <div class="mutation-examples">
                        <h4>Operaciones Principales:</h4>
                        <pre><code class="language-graphql"># Crear nuevo desarrollador
mutation CreateWhitelabelDeveloper($developer: WhitelabelDeveloperInput!) {
  createWhitelabelDeveloper(developer: $developer) {
    success
    developer {
      id
      name
      email
      status
    }
    errors
  }
}

# Actualizar información de marca blanca
mutation UpdateWhitelabelInfo($whitelabelId: ID!, $updates: WhitelabelInfoInput!) {
  updateWhitelabelInfo(whitelabelId: $whitelabelId, updates: $updates) {
    success
    whitelabel_info {
      whitelabel_id
      brand_name
      logo_url
      color_scheme
    }
    errors
  }
}

# Asignar usuario a development
mutation AssignUserToDevelopment($userId: ID!, $developmentId: ID!, $role: String!) {
  assignUserToDevelopment(userId: $userId, developmentId: $developmentId, role: $role) {
    success
    user {
      uid
      email
      development
      role
    }
    errors
  }
}</code></pre>
                    </div>
                </div>

                <div class="whitelabel-use-cases">
                    <h3>🎯 Casos de Uso del Sistema</h3>
                    
                    <div class="use-case-card">
                        <h4>1. 🏢 Empresa que Vende Software como Servicio</h4>
                        <div class="use-case-content">
                            <h5>Escenario:</h5>
                            <p>Una empresa vende el CRM a diferentes clientes, cada uno con su propia marca y configuración.</p>
                            <h5>Implementación:</h5>
                            <ul>
                                <li>Crear WhitelabelDeveloper para cada cliente</li>
                                <li>Configurar WhitelabelInfo con logo y colores</li>
                                <li>Asignar usuarios al Development correspondiente</li>
                                <li>Configurar permisos específicos por cliente</li>
                            </ul>
                        </div>
                    </div>

                    <div class="use-case-card">
                        <h4>2. 🎨 Agencia de Marketing con Múltiples Clientes</h4>
                        <div class="use-case-content">
                            <h5>Escenario:</h5>
                            <p>Una agencia usa el sistema para gestionar campañas de diferentes clientes.</p>
                            <h5>Implementación:</h5>
                            <ul>
                                <li>Development por cliente con su propia marca</li>
                                <li>Usuarios de la agencia con acceso a múltiples developments</li>
                                <li>Permisos granulares por cliente y funcionalidad</li>
                                <li>Reportes separados por development</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Whitelabel Section -->
        <section id="whitelabel" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-building"></i>
                    🏢 Sistema Whitelabel y Multi-Tenant
                </h2>

                <div class="whitelabel-overview">
                    <h3>🌐 Arquitectura Multi-Tenant</h3>
                    <p>El sistema implementa una arquitectura completa de marca blanca que permite a diferentes desarrolladores tener sus propios entornos personalizados.</p>
                </div>

                <div class="whitelabel-components">
                    <h3>🏗️ Componentes del Sistema</h3>
                    
                    <div class="component-card">
                        <h4>👨‍💻 WhitelabelDeveloper</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>id</strong> - Identificador único del desarrollador</li>
                                <li><strong>name</strong> - Nombre del desarrollador/empresa</li>
                                <li><strong>email</strong> - Email de contacto</li>
                                <li><strong>permissions</strong> - Array de permisos específicos</li>
                                <li><strong>status</strong> - Estado activo/inactivo</li>
                                <li><strong>created_at</strong> - Fecha de creación</li>
                            </ul>
                        </div>
                    </div>

                    <div class="component-card">
                        <h4>🏷️ WhitelabelInfo</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>whitelabel_id</strong> - ID único de la marca blanca</li>
                                <li><strong>brand_name</strong> - Nombre de la marca</li>
                                <li><strong>logo_url</strong> - URL del logo personalizado</li>
                                <li><strong>color_scheme</strong> - Esquema de colores</li>
                                <li><strong>custom_domain</strong> - Dominio personalizado</li>
                            </ul>
                        </div>
                    </div>

                    <div class="component-card">
                        <h4>⚙️ Development</h4>
                        <div class="component-content">
                            <h5>Campos Principales:</h5>
                            <ul>
                                <li><strong>development_id</strong> - ID del entorno</li>
                                <li><strong>title</strong> - Título del development</li>
                                <li><strong>permissions</strong> - Permisos del entorno</li>
                                <li><strong>role</strong> - Rol del usuario en el development</li>
                                <li><strong>status</strong> - Estado del development</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="whitelabel-queries">
                    <h3>🔍 Queries de Whitelabel</h3>
                    
                    <div class="query-examples">
                        <h4>Consultas Principales:</h4>
                        <pre><code class="language-graphql"># Obtener desarrollador por ID
query GetWhitelabelDeveloper($developerId: ID!) {
  getWhitelabelDeveloper(developerId: $developerId) {
    id
    name
    email
    permissions
    status
    created_at
    whitelabel_info {
      whitelabel_id
      brand_name
      logo_url
      color_scheme
      custom_domain
    }
  }
}

# Obtener información de marca blanca
query GetWhitelabelInfo($whitelabelId: ID!) {
  getWhitelabelInfo(whitelabelId: $whitelabelId) {
    whitelabel_id
    brand_name
    logo_url
    color_scheme
    custom_domain
    features {
      crm_enabled
      events_enabled
      campaigns_enabled
      analytics_enabled
    }
    limits {
      max_users
      max_storage
      max_api_calls
    }
  }
}

# Obtener development por usuario
query GetUserDevelopment($userId: ID!) {
  getUserDevelopment(userId: $userId) {
    development_id
    title
    permissions
    role
    status
    whitelabel_info {
      brand_name
      logo_url
    }
  }
}</code></pre>
                    </div>
                </div>

                <div class="whitelabel-mutations">
                    <h3>⚙️ Mutations de Whitelabel</h3>
                    
                    <div class="mutation-examples">
                        <h4>Operaciones Principales:</h4>
                        <pre><code class="language-graphql"># Crear nuevo desarrollador
mutation CreateWhitelabelDeveloper($developer: WhitelabelDeveloperInput!) {
  createWhitelabelDeveloper(developer: $developer) {
    success
    developer {
      id
      name
      email
      status
    }
    errors
  }
}

# Actualizar información de marca blanca
mutation UpdateWhitelabelInfo($whitelabelId: ID!, $updates: WhitelabelInfoInput!) {
  updateWhitelabelInfo(whitelabelId: $whitelabelId, updates: $updates) {
    success
    whitelabel_info {
      whitelabel_id
      brand_name
      logo_url
      color_scheme
    }
    errors
  }
}

# Asignar usuario a development
mutation AssignUserToDevelopment($userId: ID!, $developmentId: ID!, $role: String!) {
  assignUserToDevelopment(userId: $userId, developmentId: $developmentId, role: $role) {
    success
    user {
      uid
      email
      development
      role
    }
    errors
  }
}</code></pre>
                    </div>
                </div>

                <div class="whitelabel-use-cases">
                    <h3>🎯 Casos de Uso del Sistema</h3>
                    
                    <div class="use-case-card">
                        <h4>1. 🏢 Empresa que Vende Software como Servicio</h4>
                        <div class="use-case-content">
                            <h5>Escenario:</h5>
                            <p>Una empresa vende el CRM a diferentes clientes, cada uno con su propia marca y configuración.</p>
                            <h5>Implementación:</h5>
                            <ul>
                                <li>Crear WhitelabelDeveloper para cada cliente</li>
                                <li>Configurar WhitelabelInfo con logo y colores</li>
                                <li>Asignar usuarios al Development correspondiente</li>
                                <li>Configurar permisos específicos por cliente</li>
                            </ul>
                        </div>
                    </div>

                    <div class="use-case-card">
                        <h4>2. 🎨 Agencia de Marketing con Múltiples Clientes</h4>
                        <div class="use-case-content">
                            <h5>Escenario:</h5>
                            <p>Una agencia usa el sistema para gestionar campañas de diferentes clientes.</p>
                            <h5>Implementación:</h5>
                            <ul>
                                <li>Development por cliente con su propia marca</li>
                                <li>Usuarios de la agencia con acceso a múltiples developments</li>
                                <li>Permisos granulares por cliente y funcionalidad</li>
                                <li>Reportes separados por development</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Examples Section -->
        <section id="examples" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-lightbulb"></i>
                    Casos de Uso y Ejemplos
                </h2>

                <div class="use-cases">
                    <h3>🎯 Casos de Uso Principales</h3>
                    
                    <div class="use-case-card">
                        <h4>1. Gestión de Pipeline de Leads</h4>
                        <div class="use-case-content">
                            <h5>Flujo:</h5>
                            <ol>
                                <li>Captura de lead desde formulario web</li>
                                <li>Asignación automática o manual</li>
                                <li>Seguimiento con recordatorios</li>
                                <li>Calificación y scoring</li>
                                <li>Conversión a contacto/entidad</li>
                                <li>Análisis de métricas</li>
                            </ol>
                        </div>
                    </div>

                    <div class="use-case-card">
                        <h4>2. Campañas de Marketing Multi-Canal</h4>
                        <div class="use-case-content">
                            <h5>Flujo:</h5>
                            <ol>
                                <li>Segmentación de audiencia</li>
                                <li>Creación de plantillas</li>
                                <li>Programación de envíos</li>
                                <li>Automatización de respuestas</li>
                                <li>Seguimiento de engagement</li>
                                <li>Optimización basada en métricas</li>
                            </ol>
                        </div>
                    </div>

                    <div class="use-case-card">
                        <h4>3. Gestión de Eventos Corporativos</h4>
                        <div class="use-case-content">
                            <h5>Flujo:</h5>
                            <ol>
                                <li>Creación del evento</li>
                                <li>Gestión de invitados</li>
                                <li>Control de presupuesto</li>
                                <li>Asignación de tareas</li>
                                <li>Seguimiento de asistencia</li>
                                <li>Análisis post-evento</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <div class="code-examples">
                    <h3>💻 Ejemplos de Código</h3>
                    
                    <div class="example-card">
                        <h4>Crear Lead con Notas</h4>
                        <pre><code class="language-typescript">const CREATE_LEAD_WITH_NOTE = gql`
  mutation CreateLeadWithNote($lead: CRM_LeadInput!, $note: CRM_NoteInput!) {
    createCRMLead(lead: $lead) {
      _id
      name
      email
      status
    }
    addCRMLeadNote(leadId: $lead._id, note: $note) {
      _id
      content
      createdAt
    }
  }
`;

const CreateLead: React.FC = () => {
  const [createLead] = useMutation(CREATE_LEAD_WITH_NOTE);

  const handleSubmit = async (values: any) => {
    try {
      const result = await createLead({
        variables: {
          lead: {
            name: values.name,
            email: values.email,
            phone: values.phone,
            company: values.company,
            source: values.source,
            status: 'new',
            value: parseFloat(values.value),
            probability: 0.1
          },
          note: {
            content: values.notes,
            type: 'initial_contact'
          }
        }
      });
      
      // Manejar éxito
    } catch (error) {
      // Manejar error
    }
  };

  return (
    <Formik
      initialValues={{
        name: '',
        email: '',
        phone: '',
        company: '',
        source: '',
        value: '',
        notes: ''
      }}
      onSubmit={handleSubmit}
    >
      {/* Formulario */}
    </Formik>
  );
};</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Deployment Section -->
        <section id="deployment" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-rocket"></i>
                    Despliegue y Configuración
                </h2>

                <div class="deployment-overview">
                    <h3>🚀 Configuración de Producción</h3>
                    
                    <div class="env-config">
                        <h4>Variables de Entorno</h4>
                        <pre><code class="language-bash"># API Configuration
GRAPHQL_PORT=4000
MCP_PORT=4001

# Database
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/crm_production

# Firebase
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_PRIVATE_KEY=your-private-key
FIREBASE_CLIENT_EMAIL=your-client-email

# JWT
JWT_SECRET=your-super-secret-jwt-key

# External Services
WHATSAPP_API_KEY=your-whatsapp-api-key
EMAIL_SERVICE_API_KEY=your-email-service-key

# Security
CORS_ORIGIN=https://yourdomain.com
RATE_LIMIT_WINDOW=15m
RATE_LIMIT_MAX=100</code></pre>
                    </div>

                    <div class="nginx-config">
                        <h4>Configuración Nginx</h4>
                        <pre><code class="language-nginx">server {
    listen 80;
    server_name api2.eventosorganizador.com;
    
    location /graphql {
        proxy_pass http://localhost:4000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    
    location /mcp {
        proxy_pass http://localhost:4001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}</code></pre>
                    </div>
                </div>

                <div class="monitoring">
                    <h3>📊 Monitoreo y Logs</h3>
                    
                    <div class="monitoring-tools">
                        <h4>Herramientas Recomendadas:</h4>
                        <ul>
                            <li><strong>Health Checks</strong> - Endpoints de estado de la API</li>
                            <li><strong>Logs Estructurados</strong> - Winston + Morgan</li>
                            <li><strong>Métricas</strong> - Prometheus + Grafana</li>
                            <li><strong>Alertas</strong> - Notificaciones automáticas</li>
                            <li><strong>Backup</strong> - Respaldo automático de MongoDB</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Marketing Soluciones</h3>
                    <p>Sistema CRM completo para gestión de relaciones con clientes</p>
                </div>
                <div class="footer-section">
                    <h3>Enlaces Útiles</h3>
                    <ul>
                        <li><a href="https://github.com/carlos2325/crm-documentation">Repositorio</a></li>
                        <li><a href="https://carlos2325.github.io/crm-documentation/">Documentación</a></li>
                        <li><a href="https://api2.eventosorganizador.com/">API Production</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <p>Equipo de Desarrollo</p>
                    <p>Marketing Soluciones</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Marketing Soluciones. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scroll-top" class="scroll-top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html>
